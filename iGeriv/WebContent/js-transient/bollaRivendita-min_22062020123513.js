function manageBarcodeKeyDownBollaConsegna(a){var c=a.keyCode?a.keyCode:a.charCode;$("#aggiornaBarcode").length>0&&$("#aggiornaBarcode").is(":checked")&&$("#barcode").val().trim().length>0&&!isNaN($("#barcode").val().trim())&&c=="13"?callBarcodeVenditeService():manageBarcodeKeyDown(a.data.callback,a)}function setBarcodeKeyDownEvent(){$("#barcode").length>0&&$("#barcode").keydown({callback:null},manageBarcodeKeyDownBollaConsegna)}
onBlurFields=function(a){var c=a.next("input:hidden[name^=spunta]").next("input:hidden[name^=modificato]");if(Math.abs(a.val())>101){PlaySound("beep3");jConfirm(differenzaMoltoGrandeConfirm.replace("{0}",a.val()),attenzioneMsg.toUpperCase(),function(b){if(b)c.val("true");else{setTimeout(function(){a.focus()},50);a.val("");return false}},true,false);return false}c.val("true")};
function setFieldEvents(){$fields=$("#BollaControlloForm input:text[name^=field]:enabled");$fields.numeric({negative:true,decimal:false});$fields.attr("maxlength","4");$fields.keypress(function(a){if((a.keyCode?a.keyCode:a.charCode)==13){a.preventDefault();onBlurFields($(this))}});$fields.blur(function(){onBlurFields($(this))});$fields.change(function(){$("#totalHeader_7").text(calculateMancanze());$("#totalHeader_8").text(calculateEccedenze())})}
function setFieldsToSave(a){var c=$("#BollaControlloForm input:text[name^=fieldMap]:enabled");window.Remaining1=c.length;c.each(function(){var b=$(this),d=b.next("input:hidden[name^=spunta]");if(a){b.data("oldVal",b.val());d.data("oldVal",d.val())}else{var e=d.next("input:hidden[name^=modificato]");b.data("oldVal")!=b.val()||d.data("oldVal")!=d.val()?e.val("true"):e.val("false")}--window.Remaining1;window.Remaining1==0&&c.attr("disabled",false)});return true}
function bollaRivKeyPress(a){var c=a.keyCode?a.keyCode:a.charCode;if(!a.shiftKey&&c=="9"||c=="40")setTimeout(function(){var b=lastFocusedFieldId.replace(/([|])/g,"\\$1"),d=$("#"+b).closest("tr").next().find("input:text[name^='fieldMap']:enabled").first();$("#"+b).css("background","#fff");d.focus();$("#"+b).trigger("blur")},100);else if(a.shiftKey&&c=="9"||c=="38")setTimeout(function(){var b=lastFocusedFieldId.replace(/([|])/g,"\\$1"),d=$("#"+b).closest("tr").prev().find("input:text[name^='fieldMap']:enabled").first();
$("#"+b).css("background","#fff");d.focus();$("#"+b).trigger("blur")},100)}function setBollaRivKeyPress(){$(this).bind("keydown",bollaRivKeyPress)};
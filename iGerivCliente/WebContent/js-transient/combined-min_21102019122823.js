function clearErrorMessages(a){clearErrorMessagesXHTML(a)}function clearErrorMessagesXHTML(){for(var a=document.getElementsByTagName("span"),b=0;b<a.length;b++)if(a[b].id.indexOf("err_")!=-1)document.getElementById(a[b].id).innerHTML=""}function clearErrorLabels(a){clearErrorLabelsXHTML(a)}function clearErrorLabelsXHTML(){}function addError(a,b){addErrorXHTML(a,b)}
function addErrorXHTML(a,b){try{for(var c=document.getElementsByTagName("span"),d=0;d<c.length;d++)if(c[d].id.indexOf("err_"+a.id)!=-1){document.getElementById(c[d].id).innerHTML=b;break}}catch(e){alert(e)}}
var cal_obj2=null,formElement=null,format="%d/%m/%Y",errorMessage,errorMessageDelete,okMessage,okMessageDelete,nessunaPubblicazione,chiudiLabel,submitButton,reportImage,reportImageHref,lastKeypressCode,lastFocusedFieldId,firstInvalidId="",pingFailureCount=0,lastFocusedRow="",lastFocusColor="",popupWiderThanViewport=false;
$.alt=function(a,b,c,d){var e=false;$(document).keydown(function(g){c||(c=[]);if(g.altKey)e=true;d=typeof d==="undefined"||d===""?a.charCodeAt(0):d;if(g.keyCode==d&&e){if(g.preventDefault)g.preventDefault();else g.returnValue=false;b.apply(this,c);return false}}).keyup(function(){e=false})};
$.altPlus=function(a,b){var c=false;$(document).keydown(function(d){b||(b=[]);if(d.altKey)c=true;var e=null;if(!d)d=window.event;if(d.keyCode)e=d.keyCode;else if(d.which)e=d.which;if((String.fromCharCode(e)=="+"||e==171||e==187||e==107)&&c){if(d.preventDefault)d.preventDefault();else d.returnValue=false;a.apply(this,b);return false}}).keyup(function(){c=false})};
$.altMinus=function(a,b){var c=false;$(document).keydown(function(d){b||(b=[]);if(d.altKey)c=true;var e=null;if(!d)d=window.event;if(d.keyCode)e=d.keyCode;else if(d.which)e=d.which;if((String.fromCharCode(e)=="-"||e==173||e==189||e==109)&&c){if(d.preventDefault)d.preventDefault();else d.returnValue=false;a.apply(this,b);return false}}).keyup(function(){c=false})};
$.ctrl=function(a,b,c){var d=false;$(document).keydown(function(e){c||(c=[]);if(e.ctrlKey)d=true;if(e.keyCode==a.charCodeAt(0)&&d){if(e.preventDefault)e.preventDefault();else e.returnValue=false;b.apply(this,c);return false}}).keyup(function(){d=false})};
$.shift=function(a,b,c,d){var e=false;$(document).keydown(function(g){c||(c=[]);if(g.shiftKey)e=true;d=typeof d==="undefined"||d===""?a.charCodeAt(0):d;if(g.keyCode==d&&e){if(g.preventDefault)g.preventDefault();else g.returnValue=false;b.apply(this,c);return false}}).keyup(function(){e=false})};$.ctrl("E",function(){var a=$("img[src*='pdf.gif']").first();a.length>0&&a.trigger("click")});$.ctrl("X",function(){var a=$("img[src*='xls.gif']").first();a.length>0&&a.trigger("click")});
$.ctrl("M",function(){var a="",b="";if($("#popup_name").is(":visible"))a=$("#popup_name").find("form");else if($("#popup_name_det").is(":visible"))a=$("#popup_name_det").find("form");if(a.length>0)a.each(function(){b=$(this).find("input[value='"+memorizza+"']").first();if(b.length>0){b.trigger("click");return false}});else b=$("input[value='"+memorizza+"']").first();b.trigger("click")});$.ctrl("I",function(){$("#memorizzaInvia").length>0&&$("#memorizzaInvia").trigger("click")});
$(this).bind("keydown",function(a){lastKeypressCode=a.keyCode?a.keyCode:a.charCode;switch(a.keyCode?a.keyCode:a.charCode){case 27:if($("#popup_name").is(":visible")||$("#popup_name_det").is(":visible")||$("#treeContiContainer").is(":visible"))$("#close").trigger("click")}});$("input[id*=memorizza],input[id*=cancella],input[id*=ricerca],input[id*=submit]").click(disableSubmitButton);$("img[src*='pdf.gif'],img[src*='xls.gif']").click(function(){blockUIForDownload($(this))});
function setMenuListWidths(){if($(window).width()<=1024)getBrowser().indexOf("MSIE")!=-1?$("#mydroplinemenu ul").css({"font-size":"10px"}):$("#mydroplinemenu ul").css({"font-size":"11px"});else if($(window).width()>1024&&$(window).width()<=1280){$("#mydroplinemenu ul li").css({"font-size":"12px"});$("#mydroplinemenu ul li a:not(ul li ul li a)").each(function(){$(this).css({padding:"9px 0px 5px 20px"})})}else if($(window).width()>1280&&$(window).width()<=1440){$("#mydroplinemenu ul").css({"font-size":"13px"});
$("#mydroplinemenu ul li a:not(ul li ul li a)").each(function(){$(this).css({padding:"9px 0px 10px 20px"})})}else{$("#mydroplinemenu ul").css({"font-size":"13px"});$("#mydroplinemenu ul li a:not(ul li ul li a)").each(function(){$(this).css({padding:"9px 0px 10px 25px"})})}}function PlaySound(a){if(allowBeep=="true")try{var b=document.getElementById(a);if(b)try{b.Play()}catch(c){b.play()}}catch(d){}}
function disableSubmitButton(a){a=a.target?a.target:a.srcElement?a.srcElement:null;if(a.type=="submitButton"||a.type=="button"){submitButton=$("#"+a.id);submitButton.attr("disabled",true);ray.ajax()}}function clearPubblicazioniFilterFields(){$("#titolo").val("");$("#sottotitolo").val("");$("#argomento").val("");$("#periodicita").val("");$("#prezzo").val("");$("#codPubblicazione").val("");$("#codBarre").val("")}var fileDownloadCheckTimer;
function setLastFocusedElement(a){if(typeof a==="undefined"||a=="")a=window.document;$("input[type='text'], input[type='file'], select, button",a).focus(function(){var b=$(this).attr("type");if(typeof b!=="undefined"&&(b=="text"||b=="file"||b=="select-one"))lastFocusedFieldId=this.id})}
function blockUIForDownload(){if(areCookiesEnabled()){var a=(new Date).getTime();if($("#popup_name_det").is(":visible")){$("#downloadToken2").length>0?$("#downloadToken2").val(a):$('input[name="downloadToken2"]').val(a);if($("#downloadToken2").length>0&&$("#downloadToken2").val().length>0||$('input[name="downloadToken2"]').length>0&&$('input[name="downloadToken2"]').val().length>0)ray1.ajax()}else if($("#popup_name").is(":visible")){$("#downloadToken1").length>0?$("#downloadToken1").val(a):$('input[name="downloadToken1"]').val(a);
if($("#downloadToken1").length>0&&$("#downloadToken1").val().length>0||$('input[name="downloadToken1"]').length>0&&$('input[name="downloadToken1"]').val().length>0)ray1.ajax()}else{$("#downloadToken").length>0?$("#downloadToken").val(a):$('input[name="downloadToken"]').val(a);if($("#downloadToken").length>0&&$("#downloadToken").val().length>0||$('input[name="downloadToken"]').length>0&&$('input[name="downloadToken"]').val().length>0)ray.ajax()}fileDownloadCheckTimer=window.setInterval(function(){if(getCookie("fileDownloadToken")==
a){finishDownload();typeof finishDownloadCallback==="function"&&finishDownloadCallback()}},1E3)}}function finishDownload(){window.clearInterval(fileDownloadCheckTimer);setCookie("fileDownloadToken",null);unBlockUI()}
function unBlockUI(){if(document.getElementById("load"))document.getElementById("load").style.visibility="hidden";if(document.getElementById("load1"))document.getElementById("load1").style.visibility="hidden";if(document.getElementById("load2"))document.getElementById("load2").style.visibility="hidden";submitButton&&submitButton.attr("disabled",false)}
function setFormAction(a,b,c,d,e,g,h,f,i,l){if(typeof f==="function")if(!f())return false;if(typeof i==="undefined"||i.length==0)i=true;f=$("#"+a);var j=false;if(typeof g!="undefined"&&g!="")f=$("#"+a,g);if(typeof e!="undefined"&&e!="")j=e;e=f.find("input[name='ec_eti']");typeof b!="undefined"&&b!=""&&f.attr("action",b);typeof c!="undefined"&&c!=""&&f.attr("method",c);e.length>0&&e.val("");formSubmit(a,d,b,j,g,h,i,l)}
function formSubmitMultipartAjax(a,b,c,d,e){if(typeof d==="function")if(!d(false))return false;if(typeof b=="undefined"||b=="")b="html";dojo.require("dojo.io.iframe");dojo.io.iframe.send({form:a,handleAs:b,load:function(g){unBlockUI();var h=g.body.innerHTML,f=$(h),i=$("igerivException",f).length>0,l=$("ul.errormessage",f).length>0||$("ul.errorMessage",f).length>0;if(i||l){var j=errorMessage;if(i)j=$("igerivException",f).html();else if(l)j=h;$.alerts.dialogClass="style_1";jAlert(j,attenzioneMsg.toUpperCase(),
function(){$.alerts.dialogClass=null})}else{if(e){$.alerts.dialogClass="style_1";jAlert(okMessage,msgAvviso.toUpperCase(),function(){$.alerts.dialogClass=null})}typeof c==="function"&&c(h)}return g}})}
function formSubmit(a,b,c,d,e,g,h,f){dojo.xhrPost({form:a,handleAs:"text",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},sync:d,handle:function(i,l){unBlockUI();var j=null;if(typeof b!=="undefined"&&b!=""&&b&&b.length>0)j=typeof e!="undefined"?$("#"+b,e):$("#"+b);var k=$(i),p=$("igerivException",k).length>0;if(typeof i=="error"||p||l.xhr.status!=200){var m=c.indexOf("delete")!=-1?errorMessageDelete:errorMessage;if(p)m=$("igerivException",k).html();if(getBrowser().indexOf("FIREFOX")!=
-1&&j&&j.length>0)j.html("<div style='color:red; width: 180px; border-style: solid; border: 1px solid red; font-size: 12px'>&nbsp;&nbsp;"+m+"&nbsp;&nbsp;</div>");else{k=document.createElement("div");k.style.color="red";k.style.width="180px";k.style.borderStyle="solid";k.style.border="1px solid red";k.style.fontSize="12px";k.innerHTML="&nbsp;&nbsp;"+(c.indexOf("delete")!=-1?errorMessageDelete:errorMessage)+"&nbsp;&nbsp;";if(j&&j.length>0){j.find("div")[0]&&j.empty();j.append(k)}}$.alerts.dialogClass=
"style_1";jAlert(m,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null});typeof f==="function"&&f()}else{m=c.indexOf("delete")!=-1?okMessageDelete:c.indexOf("send")!=-1?bollaInTrasmissione:okMessage;if(getBrowser().indexOf("FIREFOX")!=-1&&j&&j.length>0)j.html("<div style='color:green; width: 180px; border-style: solid; border: 1px solid green;'>&nbsp;&nbsp;"+m+"&nbsp;&nbsp;</div>");else{k=document.createElement("div");k.style.color="green";k.style.width="180px";k.style.borderStyle="solid";
k.style.border="1px solid green";k.innerHTML="&nbsp;&nbsp;"+m+"&nbsp;&nbsp;";if(j&&j.length>0){j.find("div")[0]&&j.empty();j.append(k)}}if(h){$.alerts.dialogClass="style_1";jAlert(m,msgAvviso.toUpperCase(),function(){$.alerts.dialogClass=null;return false})}afterSuccessSave();typeof g==="function"&&g()}onLoadFunction()}})}function refreshimage(){document.getElementById("imgCaptcha").src=document.getElementById("imgCaptcha").src+"#"}
function show_cal(a){if(!cal_obj2){formElement=a;cal_obj2=new RichCalendar;cal_obj2.start_week_day=1;cal_obj2.show_time=false;cal_obj2.default_language="it";cal_obj2.user_onchange_handler=cal2_on_change;cal_obj2.user_onclose_handler=cal2_on_close;cal_obj2.user_onautoclose_handler=cal2_on_autoclose;cal_obj2.parse_date(a.value,format);cal_obj2.show_at_element(a,"adj_right-top");cal_obj2.change_skin("alt")}}
function cal2_on_change(a,b){if(b=="day"){formElement.value=a.get_formatted_date(format);a.hide();cal_obj2=null}}function cal2_on_close(a){a.hide();cal_obj2=null}function cal2_on_autoclose(){cal_obj2=null}function Trim(a){return $.trim(a)}String.prototype.trim=function(){return Trim(this)};String.prototype.replaceAll=function(a,b){for(var c=this,d=c.indexOf(a);d>-1;){c=c.replace(a,b);d=c.indexOf(a)}return c};
String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+(b.length==0?1:b.length))};function enableAllFormFields(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++)a[b].disabled=false;a=document.getElementsByTagName("select");for(b=0;b<a.length;b++)a[b].disabled=false}
function disableAllFormFields(){for(var a=arguments,b=a.length,c=$("input:not(input[type=hidden])"),d=0;d<c.length;d++){for(var e=false,g=0;g<b;g++)if(c[d].id!=""&&c[d].id==a[g]){e=true;break}c[d].disabled=!e}c=document.getElementsByTagName("select");for(d=0;d<c.length;d++){e=false;for(g=0;g<b;g++)if(c[d].id!=""&&c[d].id==a[g]){e=true;break}c[d].disabled=!e}}
function loadjscssfile(a,b){if(b=="js"){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",a)}else if(b=="css"){c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",a)}}String.prototype.startsWith=function(a){return this.match("^"+a)==a};String.prototype.endsWith=function(a){return this.match(a+"$")==a};String.prototype.isInteger=function(a){return!isNaN(parseInt(a))};
function onLoadFunction(){}function getBrowser(){return navigator.userAgent.toUpperCase()}
function getBrowserVersion(){var a=0;if(/MSIE (\d+\.\d+);/.test(navigator.userAgent))a=new Number(RegExp.$1);else if(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))a=new Number(RegExp.$1);else if(getBrowser().indexOf("OPERA")!=-1||getBrowser().indexOf("SAFARI")!=-1&&getBrowser().indexOf("CHROME")==-1){if(/Version[\/\s](\d+\.\d+)/.test(navigator.userAgent))a=new Number(RegExp.$1)}else if(/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent))a=new Number(RegExp.$1);return a}
function getBrowserLanguage(){return navigator.language?navigator.language:navigator.userLanguage}function areCookiesEnabled(){var a=false;setCookie("testing","Hello",1);if(getCookie("testing")!=null){a=true;setCookie("testing",null,null)}return a}function setCookie(a,b,c){try{$.cookie(a,b,c)}catch(d){var e=new Date;e.setDate(e.getDate()+c);document.cookie=a+"="+escape(b)+(c==null?"":";expires="+e.toUTCString())}}
function getCookie(a){try{return $.cookie(a)}catch(b){var c=document.cookie.indexOf(a+"=");if(c!=-1){c=c+a.length+1;a=document.cookie.indexOf(";",c);if(a==-1)a=document.cookie.length;return unescape(document.cookie.substring(c,a))}}return null}
function makeBrowserChecks(){var a="";if(getBrowser().indexOf("MSIE")==-1&&getBrowser().indexOf("FIREFOX")==-1&&getBrowser().indexOf("OPERA")==-1&&getBrowser().indexOf("CHROME")==-1&&getBrowser().indexOf("SAFARI")==-1)a=browserNotSupported;if(getBrowser().indexOf("MSIE")!=-1&&getBrowserVersion()<7||getBrowser().indexOf("FIREFOX")!=-1&&getBrowserVersion()<3.5||getBrowser().indexOf("OPERA")!=-1&&getBrowserVersion()<10.5||getBrowser().indexOf("CHROME")!=-1&&getBrowserVersion()<8||getBrowser().indexOf("SAFARI")!=
-1&&getBrowserVersion()<4){a=browserVersionNotSupported.replace("{0}",navigator.userAgent.appName);a+=a!=""?"\n\n"+a:a}areCookiesEnabled()||(a+=a!=""?"\n\n"+cookiesDisabled:cookiesDisabled);if($(window).width()<1E3)a=lowResolutionScreen;if(a!=""){$.alerts.dialogClass="style_1";jAlert(a,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;$("#j_username").focus()});setTimeout(function(){$("#popup_ok").focus()},100)}}
function setChangedFieldAttribute(a){a.parent().find("input:hidden[name^=modificato]").first().val("true")}
function focusBarcodeField(a){var b=a.target?a.target:a.srcElement?a.srcElement:null;if($("#barcode").length>0)if((a.keyCode==13||a.keyCode==32)&&b.type=="text"){a.preventDefault();a=b.id.replace(/([|])/g,"\\$1");var c=a.replace("differenze","").replace("reso","").replace("resoRichiamo","").replace("resoFuoriVoce",""),d=$("#"+a),e=$("#dpeChkbx_"+c);e.length>0?setTimeout(function(){var g=b.value.trim();if(!isNaN(g)&&Number(g)>101){PlaySound("beep3");jConfirm(differenzaMoltoGrandeConfirm.replace("{0}",
g),attenzioneMsg.toUpperCase(),function(h){if(h){e.attr("checked","true");typeof checkboxChanged==="function"?checkboxChanged(e):setChangedFieldAttribute(d);$("#barcode").val("");setTimeout(function(){$("#barcode").focus()},100)}else{d.val("");setTimeout(function(){d.focus()},100)}},true,false)}else{e.attr("checked","true");typeof checkboxChanged==="function"?checkboxChanged(e):setChangedFieldAttribute(d);$("#barcode").val("");setTimeout(function(){$("#barcode").focus()},100)}},100):setTimeout(function(){var g=
b.value.trim();if(!isNaN(g)&&Number(g)>101){PlaySound("beep3");jConfirm(confirmResaInseritaMoltoGrande.replace("{0}",g),attenzioneMsg.toUpperCase(),function(h){if(h){d.trigger("blur");$("#barcode").val("");setTimeout(function(){$("#barcode").focus()},100)}else{d.val("");setTimeout(function(){d.focus()},100)}},true,false)}else{d.trigger("blur");$("#barcode").val("");setTimeout(function(){$("#barcode").focus()},100)}},100);return false}}
function stopRKey(a){if((a.keyCode?a.keyCode:a.charCode)=="13")return false;return true}
function manageBarcodeKeyDown(a){if((a.keyCode?a.keyCode:a.charCode)=="13"){var b=a.target?a.target:a.srcElement?a.srcElement:null;a.preventDefault();a=b.value;b=b.name;if(a.length==0){setTimeout(function(){$.alerts.dialogClass="style_1";jAlert(nessunaPubblicazione,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;nessunaPubblicazioneAction()})},100);return false}else{var c=$("#"+a);if(c.length>0){a=false;if($("#autoincrement").length>0)if($("#autoincrement").attr("checked")==true)a=
true;if(b.length>0)b=b.substring(b.indexOf("_")+1);selectRowByBarcode(c.val(),b,a)}else noBarcodeFoundAction(a)}}}
function selectRowByBarcode(a,b,c){if(a!=""&&$("#"+a)){lastFocusedRow!=""&&lastFocusedRow.css({backgroundColor:lastFocusColor});var d=$("input:text[id='"+b+a+"']"),e=d.val();if(c){if(typeof e==="undefined")d.val(1);else{a=$("#qtaReso");b=isNaN(a.val().trim())?1:Number(a.val().trim());d.val(!isNaN(e)?Number(e)+b:e);a.val(1)}setChangedFieldAttribute(d);validateGiacenza(d);showDialogResoSuperioreGiacenza?setTimeout(function(){PlaySound("beep3");jConfirm(msgResoSuperioreGiacenza,attenzioneMsg.toUpperCase(),
function(g){if(g)doActionsAfterSelectRow(d,c);else{g=!isNaN(e)?Number(e):e;objToFocus.val(g);$("#copieDiv").text(g)}showDialogConfirmNumeroResaRespinto=showDialogResoSuperioreGiacenza=false;objToFocus=null});$("#barcode").val("")},100):doActionsAfterSelectRow(d,c)}else doActionsAfterSelectRow(d,c)}}
function showDialog(a){var b=$("#"+a),c='<div id="close" style="z-index:999999; position:absolute; top:30px; left:630px"><a href="#"><img id="imgClose" src="/app_img/close.gif" style="border-style: none" border="0px" class="btn_close" title="'+chiudiMsg+'" alt="'+chiudiMsg+'"/></a></div>';b.fadeIn("slow",function(){b.prepend(c)});b.css({visibility:"visible",top:"350px",width:"640px",height:"520px","border-color":"#66cccc"});a=(b.height()+80)/2;var d=(b.width()+80)/2;b.css({"margin-top":-a,"margin-left":-d});
addFadeLayerEvents()}function doActionsAfterSelectRow(a,b){var c=a.parent().parent(),d=c.css("backgroundColor");$("#barcode").val("");c.css({backgroundColor:"#ffff66"});a.unbind("keydown",focusBarcodeField);a.keydown(focusBarcodeField);a.select();b?setTimeout(function(){setTotals(a);doAfterAutoIncremetActions(a);$("#barcode").focus()},100):a.focus();var e="";e=$.browser.safari?$("body"):$("html");var g=c.offset().top;e.scrollTop(g);lastFocusedRow=c;lastFocusColor=d}
function setDpeCheckboxState(a){var b=document.getElementsByTagName("input");if(a.checked){a.value="on";for(var c=0;c<b.length;c++)if(b[c].name==a.name)b[c].value="on"}else{a.value="off";for(c=0;c<b.length;c++)if(b[c].name==a.name)b[c].value="off"}}function showMsgDisabledMenuStarterAlert(){jAlert(msgDisabledMenuStarter.replace("{0}",giorniProvaPerStarter),msgAvviso.toUpperCase())}
function setDataTipoBolla(a,b){var c=a.split("|");(c=$("#"+b+" option[value^='"+(c[0]+"|"+c[1])+"']").val())?$("#dataTipoBolla").val(c):$("#dataTipoBolla option:first").attr("selected","selected")}
function spuntaAutomatica(){jConfirm(autoSpuntaMessage,attenzioneMsg.toUpperCase(),function(a){if(a){a=document.getElementsByTagName("input");for(var b=0;b<a.length;b++)if(a[b].type=="checkbox")if(a[b].id.indexOf("dpeChkbx_")!=-1)a[b].checked=true;typeof setAllCheckboxChanged==="function"&&setAllCheckboxChanged()}})}
function spuntaAutomaticaOrdiniClienti(){for(var a=document.getElementsByTagName("input"),b=0;b<a.length;b++)if(a[b].type=="checkbox")if(a[b].id.indexOf("dpeChkbx_")!=-1)a[b].checked=true;typeof setAllCheckboxChanged==="function"&&setAllCheckboxChanged()}
function validateFields(a){var b=null;firstInvalidId="";b=typeof a!="undefined"?$("#"+a+" input:text[validateIsNumeric=true]"):$("input:text[validateIsNumeric=true]");getFirstInvalidField(b);if(typeof firstInvalidId!="undefined"&&firstInvalidId!=""){selectRowByBarcode(firstInvalidId,"",false);unBlockUI();return false}return true}
function validateFieldsClienteBase(a){if($("#inviaEmail").attr("checked")==true&&$("#cliente\\.email").val().trim()==""){if(a){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",emailLabel),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#inviaEmail").focus()})}unBlockUI();return false}if($("#cliente\\.nome").val()==""){if(a){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",nomeLabel),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#cliente\\.nome").focus()})}unBlockUI();
return false}$("#codCliente").attr("disabled",false);return true}function getFirstInvalidField(a){a.each(function(){var b=$(this),c=b.val().trim();if(c!=""&&!bINT(c)){b.css({borderColor:"red"});firstInvalidId=b.attr("id");return false}else b.css({borderColor:"#999"})})}function bINT(a){return parseFloat(a)==parseInt(a)&&!isNaN(a)?true:false}function bDecimal(a){return isNaN(parseFloat(a))||a=="."?false:true}function bBoolean(a){return a.toString()=="true"||a.toString()=="false"?true:false}
function parseLocalNum(a){var b=a;if(typeof a!=="undefined"){b=a.trim();var c=a=0;if(b.match(/\./g))a=b.match(/\./g).length;if(b.match(/,/g))c=b.match(/,/g).length;if(a>1||c>1){$.alerts.dialogClass="style_1";jAlert(numeroNonValido,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;throw numeroNonValido;})}a=b;if(b.indexOf(",")!=-1)b=b.replace(",",".");if(isNaN(b)){b=a.replace(".","");b=b.replace(",",".")}}return b}
function displayNum(a){var b=a;if(a.toString().length>0){if(a.toString().indexOf(".")!=-1)b=a.toString().replace(".",",");if(a.toString().indexOf(",")!=-1)b=addThousandsSeparators(b,",",".")}return b}function addThousandsSeparators(a,b,c){a+="";x=a.split(b);x1=x[0];x2=x.length>1?b+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1"+c+"$2");return x1+x2}
function addWaitingLayerEventOnTableHeader(a){$("#"+a+" tbody tr").find("td[onclick]").each(function(){$(this).click(function(){return ray.ajax()})})}function addWaitingLayerEventOnTableHeaderThead(a){$("#"+a+" thead tr").find("td[onclick]").each(function(){$(this).click(function(){return ray.ajax()})})}function addWaitingLayerEventOnTableRows(a){$("#"+a+" tbody tr").each(function(){$(this).click(function(){return ray.ajax()})})}
function setScrollingTableBody(a,b){var c=$("#"+a+" thead").html();if($("#"+a+" thead tr td").last().text().trim()!=""){var d=c.toUpperCase().lastIndexOf("</TR>");c=c.substring(0,d)+'<td class="tableHeader" width="2%" > </td>'+c.substring(d+5)}c='<table id="headerTable">'+c+"</table>";$("#"+a+" thead").remove();$(c).insertBefore($("#"+b)).addClass("eXtremeTable").css({"border-collapse":"collapse","table-layout":"auto",width:"100%"});addWaitingLayerEventOnTableHeader("headerTable")}
function addFadeLayerEvents(a){var b=$("#close, #fade"),c=$("#closedet"),d=$("#fade, .popup_block"),e=$("#fadedet, #popup_name_det"),g=$("#fadedet, #imgClosedet");if(typeof a!="undefined"){b=$("#close, #fade",a);c=$("#closedet",a);d=$("#fade, .popup_block",a);e=$("#fadedet, #popup_name_det",a);g=$("#fadedet, #imgClosedet",a)}b.live("click",function(){var h=$(this);d.fadeOut(function(){d.die()});if(popupWiderThanViewport){enableDraggingOnPopup(h);popupWiderThanViewport=false}onCloseLayer();return false});
c.live("click",function(){e.fadeOut(function(){g.die();g.remove()});return false})}function addCloseButtonToLayer(a,b,c){b='<div id="close" style="z-index:999999"><a href="#" class="btn_close"><img id="imgClose" src="'+b+'" style="border-style: none" border="0px" class="btn_close" title="'+c+'" alt="'+c+'"/></a></div>';$("#"+a).prepend(b)}
function addTableLastRow(a){if($("#"+a).length>0){var b=Number($("#"+a).css("height").replaceAll("px","").trim()),c=0;$("#"+a+" tbody tr").each(function(){var d=Number($(this).css("height").replaceAll("px","").trim());c+=d==0||d>35?30:d});($("#"+a+" tbody tr").length>1?$("#"+a+" tbody>tr:last").prev().clone(true).find("td").text(""):$("#"+a+" tbody>tr:last").clone(true).find("td").text("")).insertAfter("#"+a+" tbody>tr:last").css({height:b-c+"px"})}}
function addHiddenInput(a,b){$("#"+a+" input:hidden").last().append('<input type="hidden" name="'+b+'" id="'+b+'"/>"')}function setFocusedFieldStyle(a){if(typeof a==="undefined"||a=="")a=window.document;if(getBrowser().indexOf("SAFARI")==-1){$("input[type='text'], select",a).focus(function(){$(this).css("background","#ffff99")});$("input[type='text'], select",a).blur(function(){$(this).css("background","#fff")})}}
function doCloseLayer(a){$("#close").trigger("click");a&&typeof a==="function"&&a()}function doValidationCategoria(){if($("#descrizione",window.parent.document).val().trim()==""){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",descrizione),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#descrizione",window.parent.document).focus()});return false}$("#descrizione",window.parent.document).attr("disabled",false);return true}
function doValidationSottoCategoria(){if($("#descrizione",window.parent.document).val().trim()==""){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",descrizione),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#descrizione",window.parent.document).focus()});return false}$("#descrizione",window.parent.document).attr("disabled",false);return true}
function doValidationProdotti(a){var b=$("#prezzi",window.parent.document).length>0?parseLocalNum($("#prezzi",window.parent.document).val()):"",c=$("#validita",window.parent.document).length>0?$("#validita",window.parent.document).val():"",d=$("#prodottoEdicola\\.descrizioneProdottoA",window.parent.document).val(),e=$("#prodottoEdicola\\.descrizioneProdottoB",window.parent.document).val(),g=$("#prodottoEdicola\\.barcode",window.parent.document).val(),h=$("#codCategoria",window.parent.document).val(),
f=$("#sottoCategoria",window.parent.document).val(),i=$("#attachment1").val().indexOf("/")!=-1?"/":"\\";i=$("#attachment1",window.parent.document).val().substring($("#attachment1",window.parent.document).val().lastIndexOf(i)+1);if(d.trim()==""){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",descrizione),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#prodottoEdicola\\.descrizioneProdottoA",window.parent.document).focus()});return false}if(h==null||h.trim()==""){$.alerts.dialogClass=
"style_1";jAlert(campoObbligatorio.replace("{0}",msgCategoria),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#codCategoria",window.parent.document).focus()});return false}if(f==null||f.trim()==""){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",msgSottoCategoria),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#sottoCategoria",window.parent.document).focus()});return false}if(g.trim()==""){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",barcode),
attenzioneMsg,function(){$.alerts.dialogClass=null;$("#prodottoEdicola\\.barcode",window.parent.document).focus()});return false}if(c.trim()!=""&&!checkDate(c)){$.alerts.dialogClass="style_1";jAlert(dataFormatoInvalido1,attenzioneMsg,function(){$.alerts.dialogClass=null;$("#validita",window.parent.document).focus()});return false}if(b.trim()!=""&&isNaN(parseLocalNum(b.trim()))){$.alerts.dialogClass="style_1";jAlert(prezzoInvalido,attenzioneMsg,function(){$.alerts.dialogClass=null;$("#prezzi",window.parent.document).focus()});
return false}if(i!=""&&!hasOnlyNonAccentCharacters(i)){$.alerts.dialogClass="style_1";jAlert(nomeFileInvalido.replace("{0}",i),attenzioneMsg,function(){$.alerts.dialogClass=null;$("#attachment1",window.parent.document).focus()});return false}$("#PrezziTab_table tbody tr td:nth-child(1)",window.parent.document).each(function(){if($(this).find("input:text").length==0)b+=","+(isNaN(parseLocalNum($(this).text().trim()))?0:parseLocalNum($(this).text().trim()))});$("#PrezziTab_table tbody tr td:nth-child(2)",
window.parent.document).each(function(){if($(this).find("input:text").length==0)c+=","+($(this).text().trim()!="undefined"?$(this).text().trim():"")});if($("#PrezziTab_table").length>0&&b.length==0){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",prezzo),attenzioneMsg,function(){$("#prezzi",window.parent.document).focus();$.alerts.dialogClass=null});return false}var l=true;dojo.xhrGet({url:appContext+"/pubblicazioniRpc_getPneBarcodeOrDescrizione.action?barcode="+g,handleAs:"json",
sync:true,headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(j){if(j.length>0){for(var k="\n",p=0;p<j.length;p++){if(p>0&&p<j.length)k+="\n";k+="- "+j[p].descrizione}if(j.length>(a=="true"?0:1)){$.alerts.dialogClass="style_1";jAlert(msgBarcodeAssociatoAltriProdotti.replace("{0}",g).replace("{1}",k),attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null});l=false;window.parent.document.stopWaitingDiv=true;return false}}}});$("#prodottoEdicola\\.descrizioneProdottoA",
window.parent.document).val(d.replace(/\u20ac/g,"&#8364;"));$("#prodottoEdicola\\.descrizioneProdottoB",window.parent.document).val(e.replace(/\u20ac/g,"&#8364;"));$("#prezziSelected").val(b);$("#validitaSelected").val(c);$("#prodottoEdicola\\.aliquota",window.parent.document).attr("disabled",false);$("#prodottoEdicola\\.descrizioneProdottoA",window.parent.document).attr("disabled",false);$("#prodottoEdicola\\.descrizioneProdottoB",window.parent.document).attr("disabled",false);$("#codCategoria",
window.parent.document).attr("disabled",false);$("#sottoCategoria",window.parent.document).attr("disabled",false);return l}function htmlEncode(a){$("<div/>").text(a).html();return a}function htmlDecode(a){return $("<div/>").html(a).text()}function promptForEmail(a){if(userType==1)hasProfiloStarter.toString()=="true"?promptPrivacyEdicolaStarter(a):promptPrivacyEdicola(a);else userType==2&&promptPrivacyClienteEdicola(a)}
function promptPrivacyEdicolaStarter(a){var b="{";b+='"testoPrivacyEdicolaStarter2":"'+testoPrivacyEdicolaStarter2.replace("{0}",giorniProvaPerStarter)+'",';b+='"ragioneSociale":"'+ragioneSocialeLabel+'",';b+='"indirizzo":"'+indirizzoLabel+'",';b+='"numCivico":"'+numCivicoLabel+'",';b+='"localita":"'+localitaLabel+'",';b+='"provincia":"'+provinciaLabel+'",';b+='"cap":"'+capLabel+'",';b+='"telefono":"'+telefonoLabel+'",';b+='"cellulare":"'+cellulareLabel+'",';b+='"tipoEdicola":"'+tipoEdicolaLabel+
'",';b+='"email":"'+emailLabel+'"';b+="}";jPromptPrivacyEdicolaStarter(testoPrivacyEdicolaStarter1,"","",msgAccettoPrivacy,b,function(c){if(c!=null&&c!=""){c=jQuery.parseJSON(c);var d=c.tipoLocalita,e=c.indirizzo,g=c.numero,h=c.cap,f=c.localita,i=c.provincia,l=c.telefono,j=c.cellulare,k=c.tipoEdicola,p=c.email;c=appContext+namespace+"/pubblicazioniRpc_sendValidationEmail.action?ragioneSociale="+escape(c.ragioneSociale)+"&tipoLocalita="+d+"&indirizzo="+escape(e)+"&numero="+escape(g)+"&cap="+h+"&localita="+
escape(f)+"&provincia="+i+"&telefono="+l+"&cellulare="+j+"&tipoEdicola="+k+"&email="+escape(p)+"&url="+a;dojo.xhrGet({url:c,handleAs:"json",headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(m,n){if(n.xhr.status==200){var o=m[0].error;if(typeof o!=="undefined"&&o.length>0){$.alerts.dialogClass="style_1";jAlert(o,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;setTimeout(function(){promptPrivacyEdicolaStarter(a)},100)})}else jAlert(msgInvioEmailVerifica,
msgAvviso,function(){window.location=appContext+namespace+"/j_spring_security_logout"})}else jAlert(msgInvioEmailVerifica,msgAvviso,function(){window.location=appContext+namespace+"/j_spring_security_logout"})}})}},function(){if($("#ragioneSociale").val()==""||$("#ragioneSociale").val().trim()==ragioneSocialeLabel){$("#ragioneSociale").css({border:"1px solid red"});$("#ragioneSociale").focus().select();return false}if($("#indirizzo").val()==""||$("#indirizzo").val().trim()==indirizzoLabel){$("#indirizzo").css({border:"1px solid red"});
$("#indirizzo").focus().select();return false}if($("#numero").val().trim()==""||$("#numero").val().trim()==numCivicoLabel){$("#numero").css({border:"1px solid red"});$("#numero").focus().select();return false}if($("#cap").val().trim()==""||$("#cap").val().trim()==capLabel||$("#cap").val().trim().length<5){$("#cap").css({border:"1px solid red"});$("#cap").focus().select();return false}if($("#localita").val().trim()==""||$("#localita").val().trim()==$("<div/>").html(localitaLabel).text()){$("#localita").css({border:"1px solid red"});
$("#localita").focus().select();return false}if($("#provincia").val()==-1){$("#provincia").css({"background-color":"#ffff99"});$("#provincia").css({border:"1px solid red"});$("#provincia").focus();return false}if(($("#telefono").val().trim()==""||$("#telefono").val().trim()==telefonoLabel)&&($("#cellulare").val().trim()==""||$("#cellulare").val().trim()==cellulareLabel)){$("#telefono").css({border:"1px solid red"});$("#telefono").focus().select();return false}if(($("#telefono").val().trim()==""||
$("#telefono").val().trim()==telefonoLabel)&&($("#cellulare").val().trim()==""||$("#cellulare").val().trim()==cellulareLabel)){$("#cellulare").css({border:"1px solid red"});$("#cellulare").focus().select();return false}if($("#tipoEdicola").val()==-1){$("#tipoEdicola").css({"background-color":"#ffff99"});$("#tipoEdicola").css({border:"1px solid red"});$("#tipoEdicola").focus();return false}if($("#email").val().trim()==""||$("#email").val().trim()==emailLabel){$("#email").css({border:"1px solid red"});
$("#email").focus().select();return false}if(!checkEmail($("#email").val().trim())){$("#email").css({border:"1px solid red"});$("#email").focus().select();return false}if($("#popup_prompt1").is(":checked")!=true){$("#popup_fieldtitle2").css({border:"1px solid red"});$("#popup_prompt1").click(function(){$("#popup_fieldtitle2").css({border:"none"})});return false}return true});setFocusedFieldStyle();$("#ragioneSociale").focus(function(){var c=$(this).val();$(this).val(c==ragioneSocialeLabel?"":c)});
$("#ragioneSociale").blur(function(){var c=$(this).val().trim();$(this).val(c==""?ragioneSocialeLabel:c);$(this).css({border:"none"})});$("#indirizzo").focus(function(){var c=$(this).val();$(this).val(c==indirizzoLabel?"":c)});$("#indirizzo").blur(function(){var c=$(this).val().trim();$(this).val(c==""?indirizzoLabel:c);$(this).css({border:"none"})});$("#numero").focus(function(){var c=$(this).val();$(this).val(c==numCivicoLabel?"":c)});$("#numero").blur(function(){var c=$(this).val().trim();$(this).val(c==
""?numCivicoLabel:c);$(this).css({border:"none"})});$("#cap").focus(function(){var c=$(this).val();$(this).val(c==capLabel?"":c)});$("#cap").blur(function(){var c=$(this).val().trim();$(this).val(c==""?capLabel:c);$(this).css({border:"none"})});$("#localita").focus(function(){var c=$(this).val();$(this).val(c==$("<div/>").html(localitaLabel).text()?"":c)});$("#localita").blur(function(){var c=$(this).val().trim();$(this).val(c==""?$("<div/>").html(localitaLabel).text():c);$(this).css({border:"none"})});
$("#provincia").change(function(){$(this).css({"background-color":"#fff"});$(this).css({border:"none"})});$("#telefono").focus(function(){var c=$(this).val();$(this).val(c==telefonoLabel?"":c)});$("#telefono").blur(function(){var c=$(this).val().trim();$(this).val(c==""?telefonoLabel:c);$(this).css({border:"none"})});$("#cellulare").focus(function(){var c=$(this).val();$(this).val(c==cellulareLabel?"":c)});$("#cellulare").blur(function(){var c=$(this).val().trim();$(this).val(c==""?cellulareLabel:
c);$(this).css({border:"none"})});$("#tipoEdicola").change(function(){$(this).css({"background-color":"#fff"});$(this).css({border:"none"})});$("#email").focus(function(){var c=$(this).val();$(this).val(c==emailLabel?"":c)});$("#email").blur(function(){var c=$(this).val().trim();$(this).val(c==""?emailLabel:c);$(this).css({border:"none"})});$("#popup_prompt1").change(function(){$(this).css({"background-color":"#fff"});$(this).css({border:"none"})});$("#ragioneSociale").focus()}
function promptPrivacyClienteEdicola(a){var b="{";b+='"dtNasc":"'+dtNascLabel+'",';b+='"giorno":"'+giornoLabel+'",';b+='"mese":"'+meseLabel+'",';b+='"anno":"'+annoLabel+'",';b+='"email":"'+emailLabel+'"';b+="}";jPromptPrivacyCliente($.validator.format(privacyMessageLettore,url_Pdf_Privacy),"","",$.validator.format(msgAccettoPrivacy,url_Pdf_Privacy),b,function(c){if(c!=null&&c!=""){c=jQuery.parseJSON(c);var d=c.dtM,e=c.dtA;d=pad(c.dtG,2)+"-"+pad(d,2)+"-"+e;dojo.xhrGet({url:appContext+namespace+"/pubblicazioniRpc_sendValidationEmail.action?dtNasc="+
d+"&sesso="+c.sesso+"&lavoro="+c.lavoro+"&scuola="+c.scuola+"&email="+c.email+"&url="+a,handleAs:"json",headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(g,h){if(h.xhr.status==200){var f=g[0].error;if(typeof f!=="undefined"&&f.length>0){$.alerts.dialogClass="style_1";jAlert(f,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;setTimeout(function(){promptPrivacyClienteEdicola(a)},100)})}else jAlert(msgInvioEmailVerifica,msgAvviso,function(){window.location=
appContext+namespace+"/j_spring_security_logout"})}else jAlert(msgInvioEmailVerifica,msgAvviso,function(){window.location=appContext+namespace+"/j_spring_security_logout"})}})}},function(){var c=new Date;if($("#dtNascG").val()==""||$("#dtNascG").val().trim()==giornoLabel){$("#dtNascG").focus();return false}if($("#dtNascM").val().trim()==""||$("#dtNascM").val().trim()==meseLabel){$("#dtNascM").focus();return false}if($("#dtNascA").val().trim()==""||$("#dtNascA").val().trim()==annoLabel){$("#dtNascA").focus();
return false}if($("#sesso").val()==-1){$("#sesso").css({"background-color":"#ffff99"});$("#sesso").focus();return false}if($("#lavoro").val()==-1){$("#lavoro").css({"background-color":"#ffff99"});$("#lavoro").focus();return false}if($("#scuola").val()==-1){$("#scuola").css({"background-color":"#ffff99"});$("#scuola").focus();return false}if($("#email").val().trim()==""||$("#email").val().trim()==emailLabel){$("#email").focus();return false}if(Number($("#dtNascG").val())<1||Number($("#dtNascG").val())>
31){$("#dtNascG").focus();return false}if(Number($("#dtNascM").val())<1||Number($("#dtNascM").val())>12){$("#dtNascM").focus();return false}if(Number($("#dtNascA").val())<=c.getFullYear()-120||Number($("#dtNascA").val())>=c.getFullYear()){$("#dtNascA").focus();return false}if(!checkDate($("#dtNascG").val().trim()+"/"+$("#dtNascM").val().trim()+"/"+$("#dtNascA").val().trim())){$("#dtNascG").focus();return false}if(!checkEmail($("#email").val().trim())){$("#email").focus();return false}if($("#popup_prompt1").is(":checked")!=
true){$("#popup_fieldtitle2").css({border:"1px solid red"});$("#popup_prompt1").click(function(){$("#popup_fieldtitle2").css({border:"none"})});return false}return true});setFocusedFieldStyle();$("#dtNascG").focus(function(){var c=$(this).val();$(this).val(c==giornoLabel?"":c)});$("#dtNascG").blur(function(){var c=$(this).val().trim();$(this).val(c==""?giornoLabel:c)});$("#dtNascM").focus(function(){var c=$(this).val();$(this).val(c==meseLabel?"":c)});$("#dtNascM").blur(function(){var c=$(this).val().trim();
$(this).val(c==""?meseLabel:c)});$("#dtNascA").focus(function(){var c=$(this).val();$(this).val(c==annoLabel?"":c)});$("#dtNascA").blur(function(){var c=$(this).val().trim();$(this).val(c==""?annoLabel:c)});$("#email").focus(function(){var c=$(this).val();$(this).val(c==emailLabel?"":c)});$("#email").blur(function(){var c=$(this).val().trim();$(this).val(c==""?emailLabel:c)});$("#sesso").change(function(){$(this).css({"background-color":"#fff"})});$("#lavoro").change(function(){$(this).css({"background-color":"#fff"})});
$("#scuola").change(function(){$(this).css({"background-color":"#fff"})});$("#popup_prompt1").change(function(){$(this).css({"background-color":"#fff"})});$("#dtNascG").focus()}
function promptPrivacyEdicola(a){jPromptPrivacy(privacyMessageEdicola,"","",email,msgAccettoPrivacy,function(b){if(b!=null){b=b.split("|")[0];dojo.xhrGet({url:appContext+namespace+"/pubblicazioniRpc_sendValidationEmail.action?email="+b+"&url="+a,handleAs:"json",headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(c,d){if(d.xhr.status==200){var e=c[0].error;if(typeof e!=="undefined"&&e.length>0){$.alerts.dialogClass="style_1";jAlert(e,attenzioneMsg.toUpperCase(),
function(){$.alerts.dialogClass=null;setTimeout(function(){promptPrivacyEdicola(a)},100)})}else jAlert(msgInvioEmailVerifica)}else jAlert(msgErroreInvioRichiesta)}})}},function(){if($("#email").val().trim()==""||$("#email").val().trim()==emailLabel){$.alerts.dialogClass="style_1";jAlert(campoObbligatorio.replace("{0}",emailLabel),attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;promptForEmail(a)});$("#email").focus();return false}if(!checkEmail($("#email").val().trim())){$.alerts.dialogClass=
"style_1";jAlert(msgInvalidEmail,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;promptForEmail(a)});$("#email").focus();return false}if($("#popup_prompt1").is(":checked")!=true){$("#popup_fieldtitle2").css({border:"1px solid red"});$("#popup_prompt1").click(function(){$("#popup_fieldtitle2").css({border:"none"})});return false}return true});setFocusedFieldStyle()}
function attivaPeriodoProvaStarter(){jConfirm(attivaPeriodoProvaConfirm.replace("{0}",giorniProvaPerStarter).replace("{1}",giorniProvaPerStarter),attenzioneMsg.toUpperCase(),function(a){if(a)dojo.xhrGet({url:appContext+namespace+"/pubblicazioniRpc_attivaPeriodoProva.action",handleAs:"json",headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(b,c){if(c.xhr.status==200)if(typeof b.error!=="undefined"&&b.error!=""){$.alerts.dialogClass="style_1";jAlert(b.error,
attenzioneMsg,function(){$.alerts.dialogClass=null;return false})}else{var d=new Date,e=pad(d.getDate(),2),g=pad(d.getMonth()+1,2),h=d.getFullYear();e=e+"/"+g+"/"+h;g=new Date;g.setDate(d.getDate()+Number(15));d=pad(g.getDate(),2);h=pad(g.getMonth()+1,2);g=g.getFullYear();d=d+"/"+h+"/"+g;jAlert(msgAttivazionePeridoProvaEseguita.replace("{0}",giorniProvaPerStarter).replace("{1}",e).replace("{2}",d),msgAvviso,function(){window.location=appContext+namespace+"/j_spring_security_logout"})}else jAlert(msgErroreInvioRichiesta)}});
else{$textField.val("");setTimeout(function(){$textField.focus()},100)}},true,false)}function pad(a,b){for(var c=""+a;c.length<b;)c="0"+c;return c}function hasOnlyNonAccentCharacters(a){return/^(?=.*[A-Za-z0-9])[A-Za-z0-9 _,.-]*$/.test(a)}
function openDiv(a,b,c,d,e,g,h,f){var i=$("#"+a);if(typeof h!="undefined"&&h!="")i=$("#"+a,h);b>$(window).width()?i.fadeIn().css({width:"90%",height:"80%"}):i.fadeIn().css({width:Number(b),height:Number(c)});a=(i.height()+80)/2;c=(i.width()+80)/2;h="#ccccff";g=typeof g!="undefined"&&g.length>0?g:"";if(typeof e!="undefined"&&e.length>0)h=e;e="btn_close";if(b>$(window).width()){popupWiderThanViewport=true;i.draggable("destroy");e="btn_closeScrollable";getBrowser().indexOf("MSIE")!=-1?i.css({"margin-top":-a,
"margin-left":-c,"background-color":h,overflow:"auto"}):i.css({"margin-top":-a,"margin-left":-c,"background-color":h,"overflow-y":"scroll"})}else i.css({"margin-top":-a,"margin-left":-c,"background-color":h});i.html('<div style="position:absolute; width:100%; text-align:center; margin-left:auto; margin-right:auto; margin-top:10%;"><p><img src="/app_img/ajax-loader.gif" width="220px" height="19px" /></p></div>');var l='<div id="close'+g+'" style="z-index:999999;"><a href="#" class="btn_close"><img id="imgClose'+
g+'" src="/app_img/close.gif" style="border-style: none" border="0px" class="'+e+'" title="'+chiudiLabel+'" alt="'+chiudiLabel+'"/></a></div>';if(d.length>0){d=d+(d.indexOf("?")==-1?"?":"&")+"ispopup=true";i.load(d,function(){i.prepend(l);typeof f==="function"&&f()})}getBrowser().indexOf("MSIE")!=-1?i.css({"border-color":"#3399cc"}):$("body").append('<div id="fade'+g+'"></div>')}
function findDuplicates(a){for(var b=a.length,c=[],d={},e=0;e<b;e++){var g=a[e];d[g]=d[g]>=1?d[g]+1:1}for(g in d)d[g]>1&&c.push(g);return c}function sleep(a){var b=new Date;for(b.setTime(b.getTime()+a);(new Date).getTime()<b.getTime(););}
function checkDate(a){var b,c;if(/\b\d{1,2}[\/-]\d{1,2}[\/-]\d{4}\b/.test(a)){c=a.indexOf("/")!=-1?"/":"-";b=a.indexOf(c);var d=a.lastIndexOf(c);c=parseInt(a.substring(0,b),10);b=parseInt(a.substring(b+1,d),10);a=parseInt(a.substring(d+1),10);d=new Date(a,b-1,c);return d.getDate()==c?d.getMonth()+1==b?d.getFullYear()==a?true:false:false:false}else return false}function checkEmail(a){if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a))return true}
function autoSaveBolle(a){function b(){switch(tipoBolla){case BOLLA_CONSEGNA:if($("#BollaControlloForm input:hidden[name^=modificato][value=true]").length>0){validateFields("BollaControlloForm");setFieldsToSave(true)&&setFormAction("BollaControlloForm","bollaRivendita_save.action","","messageDiv",false,"",function(){setFieldsToSave(false)},"",false);return false}break;case BOLLA_RESA:if($("#BollaResaForm input:hidden[name^=modificato][value=true]").length>0){validateFields("BollaResaForm");setFieldsToSave(true)&&
setFormAction("BollaResaForm","bollaResa_save.action","","messageDiv",false,"",function(){setFieldsToSave(false);deleteEmptyRowsFuoriVoce()},"",false);return false}}}this.StartPolling=function(){this.StopPolling();this.timer=setInterval(b,a)};this.StopPolling=function(){clearInterval(this.timer)};this.setPollInterval=function(c){a=c}}
function highPriorityMessagesCheck(a){function b(){generalRpcService&&generalRpcService.getPkHighPriorityMessage().addCallback(function(c){var d=$("#parentMessageDiv");if(c!=""&&(d.length==0||d.is(":hidden")))showAlertMessaggioAltaPriorita(c)})}this.StartPolling=function(){this.StopPolling();this.timer=setInterval(b,a)};this.StopPolling=function(){clearInterval(this.timer)};this.setPollInterval=function(c){a=c}}
function getNoteRivendita(a,b){return a.length>0?a:typeof b!="undefined"&&b.length>0?b:msgNoteRivendita}
function showAlertMessaggioAltaPriorita(a){a=appContext+namespace+"/avviso_showAvvisoNuovoMessaggio.action?messagePk="+a;var b=$("<div id='parentMessageDiv' class='new_message_popup_block'>");b.css({width:"150px",height:"120px","text-align":"center","margin-left":"43%","margin-right":"auto","font-weight":"bold","font-size":"100%",position:"absolute",border:"1px solid black","z-index":"999999"});$("body").prepend(b);b.hide();b.load(a,{limit:25},function(){b.slideDown("slow")})}
function addNote(a,b,c){var d=$("#noteRivenditaCpu"+c).val(),e=$("#noteRivendita"+b).val(),g=typeof d!="undefined"&&d.trim().length>0;d=typeof e!="undefined"&&e.trim().length>0?e:d;jPromptNote(msgNotePubblicazione.replace("{0}",a),d,g,msgNoteRivendita,msgNoteFisse,function(h){if(h!=null){var f=h.split("|")[0].trim(),i=h.split("|")[1].trim();dojo.xhrGet({url:appContext+namespace+"/pubblicazioniRpc_saveNotaRivendita.action?idtn="+b+"&notaRivendita="+escape(f)+"&cpu="+c+"&notaFissa="+i,preventCache:true,
handleAs:"text",handle:function(){var l=$("#noteRiv"+b);$("#noteRivenditaCpu"+c).val(i=="true"?f:"");$("#noteRivendita"+b).val(i=="false"?f:"");l.attr("title",f.length>0?f:msgNoteRivendita);l.attr("src","/app_img/"+(f.trim().length==0?"note_rivendita.gif":"note_rivendita_red.gif"));l.tooltip({delay:0,showURL:false});var j=l.closest("td").prev("td").find("input:text").first();setTimeout(function(){$("#barcode").length>0&&j.keydown(function(k){(k.keyCode?k.keyCode:k.charCode)=="13"&&$("#barcode").focus()});
j.focus()},100)}})}})}
function networkDetection(a,b){function c(){try{dojo.xhrGet({url:a,handleAs:"text",preventCache:true,load:function(e){if(e!="undefined"&&e.indexOf("j_spring_security_check")!=-1){$.alerts.dialogClass="style_1";jAlert(sessionScadutaRedirectLoginMsg,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;window.location.href=appContext+namespace+"/j_spring_security_logout"})}pingFailureCount=0;online=true},error:function(){if(pingFailureCount>=3){$.alerts.dialogClass="style_1";jAlert(userOfflineMsg,
attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;pingFailureCount=0})}online=false;pingFailureCount++}})}catch(d){dojo.io.bind({url:a,load:function(e,g){if(g!="undefined"&&g.indexOf("j_spring_security_check")!=-1){$.alerts.dialogClass="style_1";jAlert(sessionScadutaRedirectLoginMsg,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;window.location.href=appContext+namespace+"/j_spring_security_logout"})}pingFailureCount=0;online=true},error:function(){if(pingFailureCount>=
3){$.alerts.dialogClass="style_1";jAlert(userOfflineMsg,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;pingFailureCount=0})}online=false;pingFailureCount++},mimetype:"text/plain"})}}online=false;this.StartPolling=function(){this.StopPolling();this.timer=setInterval(c,b)};this.StopPolling=function(){clearInterval(this.timer)};this.setPollInterval=function(d){b=d};this.getOnlineStatus=function(){return online}}
(function(a){a.fn.hasScrollBar=function(){var b=0,c=0;if(getBrowser().indexOf("OPERA")!=-1)c=40;try{b=this.get(0).scrollHeight-c}catch(d){b=this.scrollHeight-c}return b>this.height()}})(jQuery);
RichCalendar=function(a,b){this.value="";this.format="%Y-%m-%d";this.start_week_day=1;this.iframe_obj=null;this.lib_path="rich_calendar/";this.target_obj=a;this.show_time=b;this.user_onautoclose_handler=this.user_onclose_handler=this.user_onchange_handler=null;this.language=this.default_lang="it";this.date=new Date;this.skin="";this.auto_close=true;this.position=this.value_el=null};RichCalendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent);
RichCalendar.get_iframe_styles=function(){var a,b,c=document.styleSheets,d=c.length,e="";for(a=0;a<d;a++)if(RichCalendar.is_ie){if(/igeriv_combined.css$/.test(c[a].href)){e+=c[a].cssText;break}}else{var g=null;try{g=RichCalendar.is_ie?c[a].rules:c[a].cssRules}catch(h){continue}if(g!=null){var f=g.length;for(b=0;b<f;b++)if(/rc_iframe/.test(g[b].selectorText))e+=g[b].cssText}}return e};
RichCalendar.attach_event=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&a.attachEvent("on"+b,c)};RichCalendar.detach_event=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else a.detachEvent&&a.detachEvent("on"+b,c)};RichCalendar.attach_events=function(a){RichCalendar.attach_event(a,"click",RichCalendar.onclick);RichCalendar.attach_event(a,"mouseover",RichCalendar.onmouseover);RichCalendar.attach_event(a,"mouseout",RichCalendar.onmouseout)};
RichCalendar.detach_events=function(a){RichCalendar.detach_event(a,"click",RichCalendar.onclick);RichCalendar.detach_event(a,"mouseover",RichCalendar.onmouseover);RichCalendar.detach_event(a,"mouseout",RichCalendar.onmouseout)};
RichCalendar.onclick=function(a){RichCalendar.get_event(a);if(a=RichCalendar.get_target_object(a)){var b=a.calendar,c=b.date.getFullYear(),d=b.date.getMonth(),e=b.date.getDate();switch(a.rc_object_code){case "day":b.date.setDate(a.day_num);break;case "prev_year":b.date.setDate(1);b.date.setFullYear(c-1);c=RichCalendar.get_month_days(b.date);e>c?b.date.setDate(c):b.date.setDate(e);b.show_date();break;case "prev_month":b.date.setDate(1);b.date.setMonth(d-1);c=RichCalendar.get_month_days(b.date);e>c?
b.date.setDate(c):b.date.setDate(e);b.show_date();break;case "next_month":b.date.setDate(1);b.date.setMonth(d+1);c=RichCalendar.get_month_days(b.date);e>c?b.date.setDate(c):b.date.setDate(e);b.show_date();break;case "next_year":b.date.setDate(1);b.date.setFullYear(c+1);c=RichCalendar.get_month_days(b.date);e>c?b.date.setDate(c):b.date.setDate(e);b.show_date();break;case "today":e=new Date;e.setHours(b.date.getHours());e.setMinutes(b.date.getMinutes());e.setSeconds(b.date.getSeconds());b.date=e;b.show_date();
break;case "clear":if(b.value_el)b.value_el.value="";break;case "close":b.onclose_handler();break;case "week_day":b.start_week_day=a.week_day_num;b.show_date()}a.rc_object_code!="week_day"&&b.onchange_handler(a.rc_object_code);RichCalendar.hide_auto_close(b)}};
RichCalendar.onmouseover=function(a){RichCalendar.get_event(a);var b=RichCalendar.get_target_object(a);if(b){a=b.calendar;a.date.getFullYear();a.date.getMonth();a.date.getDate();switch(b.rc_object_code){case "day":var c=new Date(a.date);c.setDate(b.day_num);a.set_footer_text(a.get_formatted_date(a.text("footerDateFormat"),c));RichCalendar.add_class(b,"rc_highlight");RichCalendar.add_class(b.parentNode,"rc_highlight");break;case "clear":case "today":case "close":case "prev_year":case "prev_month":case "next_month":case "next_year":a.set_footer_text(a.text(b.rc_object_code));
break;case "week_day":if(b.week_day_num!=a.start_week_day){b=a.text("dayNames")[b.week_day_num];c=a.text("make_first");c=c.replace("%s",b)}else c=a.text("footerDefaultText");a.set_footer_text(c);break;default:a.set_footer_text(a.text("footerDefaultText"))}}};
RichCalendar.onmouseout=function(a){RichCalendar.get_event(a);if(a=RichCalendar.get_target_object(a)){var b=a.calendar;b.set_footer_text(b.text("footerDefaultText"));RichCalendar.remove_class(a,"rc_highlight");RichCalendar.remove_class(a.parentNode,"rc_highlight")}};
RichCalendar.document_onmousedown=function(a){RichCalendar.get_event(a);if(a=RichCalendar.get_target_object(a)){a=a;for(var b=null;a;){if(a.className&&a.className.match(/^rc_iframe_body/)&&a.tagName.toUpperCase()=="BODY"){b=a.calendar;break}a=a.parentNode}RichCalendar.hide_auto_close(b)}};
RichCalendar.hide_auto_close=function(a){var b=[],c;for(c=0;c<RichCalendar.active_calendars.length;c++){var d=RichCalendar.active_calendars[c];if(d.auto_close&&d!=a){d.hide();d.user_onautoclose_handler&&d.user_onautoclose_handler(this)}else b[b.length]=d}RichCalendar.active_calendars=b};RichCalendar.make_inactive=function(a){var b=[],c;for(c=0;c<RichCalendar.active_calendars.length;c++){var d=RichCalendar.active_calendars[c];if(d!=a)b[b.length]=d}RichCalendar.active_calendars=b};
RichCalendar.get_event=function(a){return a||window.event};RichCalendar.get_target_object=function(a){return a.target?a.target:a.srcElement?a.srcElement:window.event.srcElement};RichCalendar.skin_suffix=function(a){return a!=""?"_"+a:""};RichCalendar.get_month_days=function(a,b){var c=a.getFullYear();if(b){b=parseInt(b);if(b<=0||b>11)b=null}b||(b=a.getMonth());return b==1&&RichCalendar.is_leap_year(c)?29:RichCalendar.month_days[b]};
RichCalendar.is_leap_year=function(a){return a%4==0&&a%100!=0||a%400==0?true:false};RichCalendar.get_day_of_year=function(a){var b=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);a=new Date(a.getFullYear(),0,0,0,0,0);return Math.floor((b-a)/864E5)};RichCalendar.add_class=function(a,b){RichCalendar.remove_class(a,b);a.className+=" "+b};
RichCalendar.remove_class=function(a,b){if(a&&a.className){var c=[],d=String(a.className).split(" "),e;for(e=0;e<d.length;e++)if(d[e]!=""&&d[e]!=b)c[c.length]=d[e];a.className=c.join(" ")}};
RichCalendar.get_obj_pos=function(a,b){var c=[0,0];if(!a)return c;for(var d=a;a&&b!=a;){c[0]+=a.offsetLeft;c[1]+=a.offsetTop;if(a!=d){c[0]+=parseInt(RichCalendar.get_style(a,"borderTopWidth"),10)||0;c[1]+=parseInt(RichCalendar.get_style(a,"borderLeftWidth"),10)||0}a=a.offsetParent}for(a=d;a&&b!=a&&a.tagName.toLowerCase()!="body";){c[0]-=a.scrollLeft;c[1]-=a.scrollTop;a=a.parentNode}return c};
RichCalendar.get_style=function(a,b){var c=document.defaultView;if(c&&c.getComputedStyle)return c.getComputedStyle(a,"")[b];if(c=a.currentStyle)return c[b];if(c=a.style[b])return c};RichCalendar.rc_lang_data=[];RichCalendar.month_days=[31,28,31,30,31,30,31,31,30,31,30,31];RichCalendar.active_calendars=[];RichCalendar.handlert_set=false;
RichCalendar.prototype.show=function(a,b,c,d){if(!this.value_el)this.value_el=c;this.position=d;this.iframe_obj=document.createElement("IFRAME");this.iframe_obj.className="rc_calendar"+RichCalendar.skin_suffix(this.skin);this.iframe_obj.setAttribute("scrolling","no");this.iframe_obj.setAttribute("src","javascript:false;");this.iframe_obj.calendar=this;if(this.is_relative_position(d))switch(d){case "before":c.parentNode&&c.parentNode.insertBefore(this.iframe_obj,c);break;case "after":c.parentNode&&
c.parentNode.insertBefore(this.iframe_obj,c.nextSibling);break;default:c.appendChild(this.iframe_obj);this.position="child"}else{this.iframe_obj.style.position="absolute";parseInt(a);parseInt(b);if(typeof a=="number"&&typeof b=="number"){this.iframe_obj.style.left=a+"px";this.iframe_obj.style.top=b+"px"}this.iframe_obj.style.border="1px solid #000000";this.iframe_obj.value=this.value;document.body.appendChild(this.iframe_obj)}a='<html><head><style type="text/css">'+RichCalendar.get_iframe_styles()+
'</style></head><body class="rc_iframe_body'+RichCalendar.skin_suffix(this.skin)+'" id="rc_body"></body></html>';this.iframe_doc=this.iframe_obj.contentWindow.document;this.iframe_doc.open();this.iframe_doc.write(a);this.iframe_doc.close();RichCalendar.attach_event(this.iframe_doc,"mousedown",RichCalendar.document_onmousedown);this.body_obj=this.iframe_doc.getElementById("rc_body");this.body_obj.calendar=this;this.table_obj=this.iframe_doc.createElement("TABLE");this.table_obj.className="rc_table";
this.table_obj.setAttribute("id","rc_iframe_table");this.table_obj.cellSpacing=0;this.table_obj.cellPadding=0;this.table_obj.calendar=this;this.head_tr=this.table_obj.insertRow(0);this.head_tr.className="rc_head_tr";this.clear_td=this.head_tr.insertCell(0);this.clear_td.innerHTML="c";this.clear_td.rc_object_code="clear";this.clear_td.calendar=this;RichCalendar.attach_events(this.clear_td);this.head_td=this.head_tr.insertCell(1);this.head_td.colSpan=5;this.close_td=this.head_tr.insertCell(2);this.close_td.innerHTML=
"x";this.close_td.rc_object_code="close";this.close_td.calendar=this;RichCalendar.attach_events(this.close_td);this.nav_tr=this.table_obj.insertRow(1);this.nav_tr.className="rc_nav_tr";this.prev_year_td=this.nav_tr.insertCell(0);this.prev_year_td.innerHTML="&#x00ab;";this.prev_year_td.rc_object_code="prev_year";this.prev_year_td.calendar=this;RichCalendar.attach_events(this.prev_year_td);this.prev_month_td=this.nav_tr.insertCell(1);this.prev_month_td.innerHTML="&#x2039;";this.prev_month_td.rc_object_code=
"prev_month";this.prev_month_td.calendar=this;RichCalendar.attach_events(this.prev_month_td);this.today_td=this.nav_tr.insertCell(2);this.today_td.colSpan=3;this.today_td.innerHTML=this.text("today");this.today_td.rc_object_code="today";this.today_td.calendar=this;RichCalendar.attach_events(this.today_td);this.next_month_td=this.nav_tr.insertCell(3);this.next_month_td.innerHTML="&#x203a;";this.next_month_td.rc_object_code="next_month";this.next_month_td.calendar=this;RichCalendar.attach_events(this.next_month_td);
this.next_year_td=this.nav_tr.insertCell(4);this.next_year_td.innerHTML="&#x00bb;";this.next_year_td.rc_object_code="next_year";this.next_year_td.calendar=this;RichCalendar.attach_events(this.next_year_td);this.wd_tr=this.table_obj.insertRow(2);this.wd_tr.className="rc_wd_tr";for(a=0;a<7;a++){b=this.wd_tr.insertCell(a);b.rc_object_code="week_day";b.calendar=this;RichCalendar.attach_events(b)}this.cal_tr=[];for(a=0;a<4;a++)this.create_cal_row(a);if(this.show_time){this.time_tr=this.table_obj.insertRow(7);
this.time_tr.className="rc_time_tr";b=this.time_tr.insertCell(0);b.colSpan=2;b.innerHTML=this.text("time")+":";b=this.time_tr.insertCell(1);b.colSpan=3;this.hours_obj=this.createElement("INPUT",b);this.hours_obj.className="rc_hours";this.hours_obj.setAttribute("size",1);this.hours_obj.setAttribute("maxlength",2);this.colon_span=this.createElement("SPAN",b);this.colon_span.className="rc_colon_span";this.colon_span.innerHTML="&nbsp;:&nbsp;";this.mins_obj=this.createElement("INPUT",b);this.mins_obj.className=
"rc_mins";this.mins_obj.setAttribute("size",1);this.mins_obj.setAttribute("maxlength",2);b=this.time_tr.insertCell(2);b.colSpan=2;b.innerHTML="&nbsp;"}this.footer_tr=this.table_obj.insertRow(7+(this.show_time?1:0));this.footer_tr.className="rc_footer_tr";this.footer_td=this.footer_tr.insertCell(0);this.footer_td.colSpan=7;this.footer_td.innerHTML=this.text("footerDefaultText");this.body_obj.appendChild(this.table_obj);this.size_div=document.createElement("DIV");this.size_div.className=this.body_obj.className;
this.size_div.style.position="absolute";this.size_div.style.left="-1000px";this.size_div.style.top="-1000px";document.body.appendChild(this.size_div);this.show_date();if(!RichCalendar.handlers_set){RichCalendar.attach_event(document,"mousedown",RichCalendar.document_onmousedown);RichCalendar.handlers_set=true}RichCalendar.active_calendars[RichCalendar.active_calendars.length]=this};
RichCalendar.prototype.hide=function(){if(this.iframe_obj){this.iframe_obj.parentNode.removeChild(this.iframe_obj);this.iframe_obj=null}RichCalendar.make_inactive(this)};RichCalendar.prototype.show_at_element=function(a,b){if(!(typeof a!="object"||!a))if(this.is_relative_position(b))this.show(null,null,a,b);else{RichCalendar.get_obj_pos(a);this.show(-1E3,-1E3,a,b)}};
RichCalendar.prototype.fix_position=function(a){var b=this.position;if(!this.is_relative_position(b)){if(!a)a=this.value_el;b=String(b).split("-");if(b.length==2){var c=RichCalendar.get_obj_pos(a),d=c[0];c=c[1]+a.offsetHeight;var e=parseInt(this.iframe_obj.style.borderWidth),g=parseInt(this.iframe_obj.width)+2*e;e=parseInt(this.iframe_obj.height)+2*e;switch(b[0]){case "left":d-=g;break;case "center":d+=(a.offsetWidth-g)/2;break;case "right":d+=a.offsetWidth;break;case "adj_right":d+=a.offsetWidth-
g}switch(b[1]){case "top":c-=a.offsetHeight+e;break;case "center":c+=(a.offsetHeight-e)/2-a.offsetHeight;break;case "adj_bottom":c-=e}this.iframe_obj.style.left=d+"px";this.iframe_obj.style.top=c+"px";this.iframe_obj.style.visibility="visible"}}};RichCalendar.prototype.is_relative_position=function(a){switch(a){case "before":case "after":case "child":return true;default:return false}};RichCalendar.prototype.createElement=function(a,b){var c=this.iframe_doc.createElement(a);b&&b.appendChild(c);return c};
RichCalendar.prototype.text=function(a,b){if(typeof b=="undefined")b=this.language;if(typeof RichCalendar.rc_lang_data[b]!="undefined")return typeof RichCalendar.rc_lang_data[b][a]!="undefined"?RichCalendar.rc_lang_data[b][a]:"";return typeof RichCalendar.rc_lang_data[this.default_language][a]!="undefined"?RichCalendar.rc_lang_data[this.default_language][a]:""};
RichCalendar.prototype.show_date=function(){var a=this.get_weekend_days(),b,c=this.text("dayNamesShort");for(b=0;b<7;b++){var d=(b+this.start_week_day)%7,e=this.wd_tr.cells[b];e.innerHTML=c[d];e.className=typeof a[d]!="undefined"?"rc_weekend_head":"";e.week_day_num=d}b=RichCalendar.get_month_days(this.date);d=new Date(this.date);d.setDate(1);c=(d.getDay()+7-this.start_week_day)%7+1;e=this.date.getFullYear();var g=this.date.getMonth(),h=this.date.getDate();d=new Date;var f=d.getFullYear(),i=d.getMonth(),
l=d.getDate();this.head_td.innerHTML=this.text("monthNames")[g]+", "+e;var j,k,p=0,m;for(j=0;j<6;j++)if(p==b){if(this.cal_tr[m+1]){this.cal_tr[m+1].parentNode.removeChild(this.cal_tr[m+1]);this.cal_tr[j]=null}}else for(k=0;k<7;k++){this.cal_tr[j]||this.create_cal_row(j);var n=this.cal_tr[j].cells[k];n.className="";RichCalendar.detach_events(n);if(j==0&&k+1<c||p==b)var o="&nbsp;";else{o=d=p+1;p++;n.rc_object_code="day";n.day_num=d;n.calendar=this;RichCalendar.attach_events(n);h==d&&RichCalendar.add_class(n,
"rc_current");d==l&&g==i&&e==f&&RichCalendar.add_class(n,"rc_today");d=(k+this.start_week_day)%7;typeof a[d]!="undefined"?RichCalendar.add_class(n,"rc_weekend_day"):RichCalendar.remove_class(n,"rc_weekend_day")}n.innerHTML=o;if(p==b)m=j}if(this.show_time&&this.hours_obj&&this.mins_obj){a=this.date.getHours();if(a<10)a="0"+a;m=this.date.getMinutes();if(m<10)m="0"+m;this.hours_obj.value=a;this.mins_obj.value=m}var q=this;window.setTimeout(function(){q.fit_to_content()},1);window.setTimeout(function(){q.fix_position()},
5)};RichCalendar.prototype.fit_to_content=function(){try{var a=this.iframe_doc.getElementById("rc_iframe_table");this.iframe_obj.width=a.offsetWidth;this.iframe_obj.height=a.offsetHeight;if(!parseInt(this.iframe_obj.width)||!parseInt(this.iframe_obj.height)){this.size_div.innerHTML=this.body_obj.innerHTML;this.iframe_obj.width=this.size_div.offsetWidth;this.iframe_obj.height=this.size_div.offsetHeight}}catch(b){}};
RichCalendar.prototype.create_cal_row=function(a){var b=this.table_obj.insertRow(3+a);b.className="rc_cal_tr";var c;for(c=0;c<7;c++)b.insertCell(c);return this.cal_tr[a]=b};RichCalendar.prototype.change_skin=function(a){if(this.iframe_obj){var b=RichCalendar.skin_suffix(a);this.iframe_obj.className="rc_calendar"+b;this.body_obj.className="rc_iframe_body"+b;this.skin=a}};
RichCalendar.prototype.get_formatted_date=function(a,b){if(!b)b=this.date;a||(a=this.get_date_format());if(this.show_time&&this.hours_obj&&this.mins_obj){this.date.setHours(this.hours_obj.value);var c=this.date.setMinutes(this.mins_obj.value)}var d=b.getFullYear(),e=b.getMonth(),g=b.getDate(),h=b.getDay(),f=b.getHours();c=b.getMinutes();var i=b.getSeconds(),l=this.text("monthNamesShort"),j=this.text("monthNames"),k=this.text("dayNamesShort"),p=this.text("dayNames"),m=f<12?true:false,n=f>12?f-12:f==
0?12:f,o=[];o["%a"]=m?"am":"pm";o["%A"]=m?"AM":"PM";o["%d"]=g<10?"0"+g:g;o["%D"]=k[h];o["%F"]=j[e];o["%h"]=n<10?"0"+n:n;o["%H"]=f<10?"0"+f:f;o["%g"]=n;o["%G"]=f;o["%i"]=c<10?"0"+c:c;o["%j"]=g;o["%l"]=p[h];o["%L"]=RichCalendar.is_leap_year(d)?1:0;o["%m"]=e<9?"0"+(e+1):e+1;o["%n"]=e+1;o["%M"]=l[e];o["%s"]=i<10?"0"+i:i;o["%t"]=RichCalendar.get_month_days(b);o["%w"]=h;o["%Y"]=d;o["%y"]=String(d).substr(2,2);o["%z"]=RichCalendar.get_day_of_year(b);c=String(a).match(/%./g);e=a;for(d=0;d<c.length;d++){g=
o[c[d]];if(typeof g!="undefined")e=e.replace(RegExp(c[d],"g"),g)}return e};RichCalendar.prototype.set_footer_text=function(a){if(this.footer_td)this.footer_td.innerHTML=a};RichCalendar.prototype.get_weekend_days=function(){var a=this.text("weekend").split(","),b,c=[];for(b=0;b<a.length;b++)c[a[b]]=true;return c};RichCalendar.prototype.onclose_handler=function(){this.user_onclose_handler?this.user_onclose_handler(this):this.hide()};
RichCalendar.prototype.onchange_handler=function(a){if(this.user_onchange_handler)this.user_onchange_handler(this,a);else if(a=="day"){if(this.value_el)this.value_el.value=this.get_formatted_date();this.auto_close&&this.hide()}};RichCalendar.prototype.get_date_format=function(){var a=this.text("dateFormat");a=a?a:this.format;if(this.show_time)a+=" %H:%i";return a};
RichCalendar.prototype.parse_date=function(a,b){if(typeof a!="undefined"){b||(b=this.get_date_format());var c=new Date,d=0,e=-1,g=0,h=0,f=0,i=0,l=this.text("monthNames"),j=this.text("monthNamesShort"),k=this.text("monthNames","en"),p=this.text("monthNamesShort","en");for(n=0;n<l.length;n++){var m=RegExp(l[n],"gi");a=a.replace(m,k[n])}for(n=0;n<j.length;n++){m=RegExp(j[n],"gi");a=a.replace(m,p[n])}l=String(a).split(/\W+/g);j=String(b).match(/%./g);var n;for(m=0;m<j.length;m++)if(l[m])switch(j[m]){case "%a":case "%A":if(/am/i.test(l[m])&&
h>=12)h-=12;else if(/pm/i.test(l[m])&&h<12)h+=12;break;case "%d":case "%j":g=parseInt(Number(l[m]));break;case "%F":for(n=0;n<k.length;n++)if(k[n].toLowerCase()==l[m].toLowerCase()){e=n;break}break;case "%h":case "%H":case "%g":case "%G":h=parseInt(Number(l[m]));if(/am/i.test(l[m])&&h>=12)h-=12;else if(/pm/i.test(l[m])&&h<12)h+=12;break;case "%i":f=parseInt(Number(l[m]));break;case "%m":case "%n":e=parseInt(Number(l[m]))-1;break;case "%M":for(n=0;n<p.length;n++)if(p[n].toLowerCase()==l[m].toLowerCase()){e=
n;break}break;case "%s":i=parseInt(Number(l[m]));break;case "%Y":d=parseInt(Number(l[m]));break;case "%y":d=parseInt(l[m]);if(d<100)d+=d+(d>29?1900:2E3)}if(isNaN(d)||d<=0)d=c.getFullYear();if(isNaN(e)||e<0||e>11)e=c.getMonth();if(isNaN(g)||g<=0||g>31)g=c.getDate();if(isNaN(h)||h<0||h>23)h=c.getHours();if(isNaN(f)||f<0||f>59)f=c.getMinutes();if(isNaN(i)||i<0||i>59)i=c.getSeconds();this.date=new Date(d,e,g,h,f,i)}};var text=[];text.today="Oggi";text.time="Time";
text.dayNamesShort=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"];text.dayNames=["Domenica","Luned\ufffd","Marted\ufffd","Mercoled\ufffd","Gioved\ufffd","Venerd\ufffd","Sabato"];text.monthNamesShort=["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"];text.monthNames=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];text.footerDateFormat="%j %F %Y, %D";text.dateFormat="%n-%j-%Y";text.footerDefaultText="Selezione data";
text.clear="Pulisci Data";text.prev_year="Anno precedente";text.prev_month="Mese precedente";text.next_month="Mese successivo";text.next_year="Anno successivo";text.close="Chiudi";text.weekend="0,6";text.make_first="Inizia con %s";RichCalendar.rc_lang_data.it=text;function getParameterMap(a){a=document.forms[a].elements;for(var b={},c=0;c<a.length;c++){var d=a[c].name,e=a[c].value,g=b[d];if(g)g[g.length]=e;else b[d]=[e]}return b}
var subMenuSelected=false,droplinemenu={arrowimage:{classname:"downarrowclass",src:"/app_img/down.gif",leftpadding:5},animateduration:{clickin:300,clickout:100},buildmenu:function(a){$(document).ready(function(b){var c=b("#"+a+">ul"),d=c.children("li"),e=0;d.each(function(){var g=b(this);g.attr("count",e);var h=b(this).find("ul:eq(0)"),f=h.width();this._dimensions={h:g.find("a:eq(0)").outerHeight()};(this.istopheader=g.parents("ul").length==1?true:false)||h.css({left:0,top:this._dimensions.h});var i=
g.find("a").eq(0);i=i.children().eq(0).is("span")?i.children().eq(0):i;i.append('<img src="'+droplinemenu.arrowimage.src+'" class="'+droplinemenu.arrowimage.classname+'" style="border:0; padding-left: '+droplinemenu.arrowimage.leftpadding+'px" />');g.click(function(){if(!subMenuSelected){var l=false,j=b(this).parent().children("li"),k=b(this).children("ul:eq(0)");j.each(function(){var p=b(this).children("ul:eq(0)");if(p.attr("down")=="true"){p.slideUp(droplinemenu.animateduration.clickout);p.removeAttr("down");
getBrowser().indexOf("MSIE")!=-1&&getBrowserVersion()<8&&b("#breadcrumbDiv").show();l=true;return false}});if(!l)if(k.queue().length<=1){if(this.istopheader){k.css({left:0,top:this._dimensions.h});h.width(f)}if(document.all&&!window.XMLHttpRequest)c.find("ul").css({overflow:this.istopheader?"hidden":"visible"});k.slideDown(droplinemenu.animateduration.clickin);if(getBrowser().indexOf("MSIE")!=-1&&getBrowserVersion()<8){b("#breadcrumbDiv").hide();b(this).show()}k.attr("down","true")}}subMenuSelected=
false});e++});d=c.find("ul[livello=1]").parent();e=0;d.each(function(){var g=b(this);g.attr("count",e);var h=b(this).find("ul:eq(0)"),f=h.width();this._dimensions1={h:g.find("a:eq(0)").outerHeight()};(this.istopheader=g.parents("ul").length==1?true:false)||h.css({left:0,top:this._dimensions1.h});var i=g.find("a").eq(0);i=i.children().eq(0).is("span")?i.children().eq(0):i;i.append('<img src="'+droplinemenu.arrowimage.src+'" class="'+droplinemenu.arrowimage.classname+'" style="border:0; padding-left: '+
droplinemenu.arrowimage.leftpadding+'px" />');g.click(function(){subMenuSelected=true;var l=false;$targetul=b(this);var j=$targetul.children("ul:eq(0)");$targetul.closest("ul").children("li").each(function(){var k=b(this).children("ul:eq(0)");if(k.length>0&&k.html()!=j.html())if(k.attr("down")=="true"){k.slideUp(droplinemenu.animateduration.clickout);k.removeAttr("down")}});$targetul.each(function(){var k=b(this).children("ul:eq(0)");if(k.attr("down")=="true"){k.slideUp(droplinemenu.animateduration.clickout);
k.removeAttr("down");getBrowser().indexOf("MSIE")!=-1&&getBrowserVersion()<8&&b("#breadcrumbDiv").show();l=true;return false}});if(!l)if(j.queue().length<=1){if(this.istopheader){j.css({left:0,top:this._dimensions1.h});h.width(f)}if(document.all&&!window.XMLHttpRequest)c.find("ul").css({overflow:this.istopheader?"hidden":"visible"});j.slideDown(droplinemenu.animateduration.clickin);if(getBrowser().indexOf("MSIE")!=-1&&getBrowserVersion()<8){b("#breadcrumbDiv").hide();b(this).show()}j.attr("down",
"true")}});e++});c.find("ul").css({display:"none",visibility:"visible",width:c.width()})})}},isRichText=false,rng,currentRTE,allRTEs="",isIE,isGecko,isSafari,isKonqueror,imagesPath,includesPath,cssFile;
function initRTE(a,b,c){var d=navigator.userAgent.toLowerCase();isIE=d.indexOf("msie")!=-1&&d.indexOf("opera")==-1&&d.indexOf("webtv")==-1;isGecko=d.indexOf("gecko")!=-1;isSafari=d.indexOf("safari")!=-1;isKonqueror=d.indexOf("konqueror")!=-1;if(document.getElementById&&document.designMode)isRichText=true;if(isIE){document.onmouseover=raiseButton;document.onmouseout=normalButton;document.onmousedown=lowerButton;document.onmouseup=raiseButton}imagesPath=a;includesPath=b;cssFile=c}
function writeRichText(a,b,c,d,e,g){if(isRichText){if(allRTEs.length>0)allRTEs+=";";allRTEs+=a;if(g)e=false;if(isIE){if(e&&c<540)c=540;var h=c}else{if(e&&c<540)c=540;h=c+4}var f;f='<div class="rteDiv">';if(e==true){f+='<table class="rteBack" cellpadding=2 cellspacing=0 id="Buttons1_'+a+'" width="'+h+'">';f+="\t<tr>";f+="\t\t<td>";f+='\t\t\t<select id="formatblock_'+a+'" onchange="selectFont(\''+a+"', this.id);\">";f+='\t\t\t\t<option value="">['+stileLabel+"]</option>";f+='\t\t\t\t<option value="<p>">Paragraph &lt;p&gt;</option>';
f+='\t\t\t\t<option value="<h1>">Heading 1 &lt;h1&gt;</option>';f+='\t\t\t\t<option value="<h2>">Heading 2 &lt;h2&gt;</option>';f+='\t\t\t\t<option value="<h3>">Heading 3 &lt;h3&gt;</option>';f+='\t\t\t\t<option value="<h4>">Heading 4 &lt;h4&gt;</option>';f+='\t\t\t\t<option value="<h5>">Heading 5 &lt;h5&gt;</option>';f+='\t\t\t\t<option value="<h6>">Heading 6 &lt;h6&gt;</option>';f+='\t\t\t\t<option value="<address>">Address &lt;ADDR&gt;</option>';f+='\t\t\t\t<option value="<pre>">Formatted &lt;pre&gt;</option>';
f+="\t\t\t</select>";f+="\t\t</td>";f+="\t\t<td>";f+='\t\t\t<select id="fontname_'+a+'" onchange="selectFont(\''+a+"', this.id)\">";f+='\t\t\t\t<option value="Font" selected>['+carattereLabel+"]</option>";f+='\t\t\t\t<option value="Arial, Helvetica, sans-serif">Arial</option>';f+='\t\t\t\t<option value="Courier New, Courier, mono">Courier New</option>';f+='\t\t\t\t<option value="Times New Roman, Times, serif">Times New Roman</option>';f+='\t\t\t\t<option value="Verdana, Arial, Helvetica, sans-serif">Verdana</option>';
f+="\t\t\t</select>";f+="\t\t</td>";f+="\t\t<td>";f+='\t\t\t<select unselectable="on" id="fontsize_'+a+'" onchange="selectFont(\''+a+"', this.id);\">";f+='\t\t\t\t<option value="Size">['+dimensioneLabel+"]</option>";f+='\t\t\t\t<option value="1">1</option>';f+='\t\t\t\t<option value="2">2</option>';f+='\t\t\t\t<option value="3">3</option>';f+='\t\t\t\t<option value="4">4</option>';f+='\t\t\t\t<option value="5">5</option>';f+='\t\t\t\t<option value="6">6</option>';f+='\t\t\t\t<option value="7">7</option>';
f+="\t\t\t</select>";f+="\t\t</td>";f+='\t\t<td width="100%">';f+="\t\t</td>";f+="\t</tr>";f+="</table>";f+='<table class="rteBack" cellpadding="0" cellspacing="0" id="Buttons2_'+a+'" width="'+h+'">';f+="\t<tr>";f+='\t\t<td><img id="bold" class="rteImage" src="'+imagesPath+'bold.gif" width="25" height="24" alt="Bold" title="Bold" onClick="rteCommand(\''+a+"', 'bold', '')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'italic.gif" width="25" height="24" alt="Italic" title="Italic" onClick="rteCommand(\''+
a+"', 'italic', '')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'underline.gif" width="25" height="24" alt="Underline" title="Underline" onClick="rteCommand(\''+a+"', 'underline', '')\"></td>";f+='\t\t<td><img class="rteVertSep" src="'+imagesPath+'blackdot.gif" width="1" height="20" border="0" alt=""></td>';f+='\t\t<td><img class="rteImage" src="'+imagesPath+'left_just.gif" width="25" height="24" alt="Align Left" title="Align Left" onClick="rteCommand(\''+a+"', 'justifyleft', '')\"></td>";
f+='\t\t<td><img class="rteImage" src="'+imagesPath+'centre.gif" width="25" height="24" alt="Center" title="Center" onClick="rteCommand(\''+a+"', 'justifycenter', '')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'right_just.gif" width="25" height="24" alt="Align Right" title="Align Right" onClick="rteCommand(\''+a+"', 'justifyright', '')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'justifyfull.gif" width="25" height="24" alt="Justify Full" title="Justify Full" onclick="rteCommand(\''+
a+"', 'justifyfull', '')\"></td>";f+='\t\t<td><img class="rteVertSep" src="'+imagesPath+'blackdot.gif" width="1" height="20" border="0" alt=""></td>';f+='\t\t<td><img class="rteImage" src="'+imagesPath+'hr.gif" width="25" height="24" alt="Horizontal Rule" title="Horizontal Rule" onClick="rteCommand(\''+a+"', 'inserthorizontalrule', '')\"></td>";f+='\t\t<td><img class="rteVertSep" src="'+imagesPath+'blackdot.gif" width="1" height="20" border="0" alt=""></td>';f+='\t\t<td><img class="rteImage" src="'+
imagesPath+'numbered_list.gif" width="25" height="24" alt="Ordered List" title="Ordered List" onClick="rteCommand(\''+a+"', 'insertorderedlist', '')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'list.gif" width="25" height="24" alt="Unordered List" title="Unordered List" onClick="rteCommand(\''+a+"', 'insertunorderedlist', '')\"></td>";f+='\t\t<td><img class="rteVertSep" src="'+imagesPath+'blackdot.gif" width="1" height="20" border="0" alt=""></td>';f+='\t\t<td><img class="rteImage" src="'+
imagesPath+'outdent.gif" width="25" height="24" alt="Outdent" title="Outdent" onClick="rteCommand(\''+a+"', 'outdent', '')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'indent.gif" width="25" height="24" alt="Indent" title="Indent" onClick="rteCommand(\''+a+"', 'indent', '')\"></td>";f+='\t\t<td><div id="forecolor_'+a+'"><img class="rteImage" src="'+imagesPath+'textcolor.gif" width="25" height="24" alt="Text Color" title="Text Color" onClick="dlgColorPalette(\''+a+"', 'forecolor', '')\"></div></td>";
f+='\t\t<td><div id="hilitecolor_'+a+'"><img class="rteImage" src="'+imagesPath+'bgcolor.gif" width="25" height="24" alt="Background Color" title="Background Color" onClick="dlgColorPalette(\''+a+"', 'hilitecolor', '')\"></div></td>";f+='\t\t<td><img class="rteVertSep" src="'+imagesPath+'blackdot.gif" width="1" height="20" border="0" alt=""></td>';f+='\t\t<td><img class="rteImage" src="'+imagesPath+'hyperlink.gif" width="25" height="24" alt="Insert Link" title="Insert Link" onClick="insertLink(\''+
a+"')\"></td>";f+='\t\t<td><img class="rteImage" src="'+imagesPath+'image.gif" width="25" height="24" alt="Add Image" title="Add Image" onClick="addImage(\''+a+"')\"></td>";f+='\t\t<td><div id="table_'+a+'"><img class="rteImage" src="'+imagesPath+'insert_table.gif" width="25" height="24" alt="Insert Table" title="Insert Table" onClick="dlgInsertTable(\''+a+"', 'table', '')\"></div></td>";if(isIE)f+='\t\t<td><img class="rteImage" src="'+imagesPath+'spellcheck.gif" width="25" height="24" alt="Spell Check" title="Spell Check" onClick="checkspell()"></td>';
f+='\t\t<td width="100%"></td>';f+="\t</tr>";f+="</table>"}f+='<iframe id="'+a+'" name="'+a+'" width="'+c+'px" height="'+d+'px" src="#"></iframe>';g||(f+="<br />");f+='<iframe width="154" height="104" id="cp'+a+'" src="'+includesPath+'palette.htm" marginwidth="0" marginheight="0" scrolling="no" style="visibility:hidden; position: absolute;"></iframe>';f+='<input type="hidden" id="hdn'+a+'" name="'+a+'" value="">';f+="</div>";$("#innerDiv").append(f);document.getElementById("hdn"+a).value=b;enableDesignMode(a,
b,g)}}
function enableDesignMode(a,b,c){var d='<html id="'+a+'">\n';d+="<head>\n";if(cssFile.length>0)d+='<link media="all" type="text/css" href="'+cssFile+'" rel="stylesheet">\n';else{d+="<style>\n";d+="body {\n";d+="\tbackground: #FFFFFF;\n";d+="\tmargin: 0px;\n";d+="\tpadding: 0px;\n";d+="}\n";d+="</style>\n"}d+="</head>\n";d+="<body>\n";d+=b+"\n";d+="</body>\n";d+="</html>";if(document.all){var e=frames[a].document;e.open();e.write(d);e.close();if(!c)e.designMode="On"}else try{if(!c)document.getElementById(a).contentDocument.designMode="on";
try{e=document.getElementById(a).contentWindow.document;e.open();e.write(d);e.close();isGecko&&!c&&e.addEventListener("keypress",kb_handler,true)}catch(g){alert("Error preloading content.")}}catch(h){if(isGecko)setTimeout("enableDesignMode('"+a+"', '"+b+"', "+c+");",10);else return false}}function updateRTEs(){for(var a=allRTEs.split(";"),b=0;b<a.length;b++)updateRTE(a[b])}
function updateRTE(a){if(isRichText){var b=document.getElementById("hdn"+a),c=document.getElementById(a),d=false;if(document.all){if(frames[a].document.designMode!="On")d=true}else if(document.getElementById(a).contentDocument.designMode!="on")d=true;if(isRichText&&!d){if(b.value==null)b.value="";b.value=document.all?frames[a].document.body.innerHTML:c.contentWindow.document.body.innerHTML;if(stripHTML(b.value.replace("&nbsp;"," "))==""&&b.value.toLowerCase().search("<hr")==-1&&b.value.toLowerCase().search("<img")==
-1)b.value="";if(escape(b.value)=="%3Cbr%3E%0D%0A%0D%0A%0D%0A")b.value=""}}}function rteCommand(a,b,c){a=document.all?frames[a]:document.getElementById(a).contentWindow;try{a.focus();a.document.execCommand(b,false,c);a.focus()}catch(d){}}
function toggleHTMLSrc(a){var b;b=document.all?frames[a].document:document.getElementById(a).contentWindow.document;showHideElement("Buttons1_"+a,"show");showHideElement("Buttons2_"+a,"show");if(document.all){a=escape(b.body.innerText);a=a.replace("%3CP%3E%0D%0A%3CHR%3E","%3CHR%3E");a=a.replace("%3CHR%3E%0D%0A%3C/P%3E","%3CHR%3E");b.body.innerHTML=unescape(a)}else{a=b.body.ownerDocument.createRange();a.selectNodeContents(b.body);b.body.innerHTML=a.toString()}}
function dlgColorPalette(a,b){setRange(a);var c=document.getElementById("cp"+a),d=document.getElementById(b+"_"+a),e=getOffsetLeft(d);d=getOffsetTop(d)+(d.offsetHeight+4);c.style.left=e+"px";c.style.top=d+"px";if(b==parent.command&&a==currentRTE)c.style.visibility=="hidden"?showHideElement(c,"show"):showHideElement(c,"hide");else{e=allRTEs.split(";");for(d=0;d<e.length;d++)showHideElement("cp"+e[d],"hide");showHideElement(c,"show")}parent.command=b;currentRTE=a}
function dlgInsertTable(a,b){setRange(a);parent.command=b;currentRTE=a;window.open(includesPath+"insert_table.htm","InsertTable","history=no,toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=no,resizable=no,width=360,height=200")}function insertLink(a){var b=prompt("Enter a URL:","");try{rteCommand(a,"Unlink",null);rteCommand(a,"CreateLink",b)}catch(c){}}
function setColor(a){var b=currentRTE,c=parent.command;if(document.all){var d=frames[b].document.selection;if(c=="hilitecolor")c="backcolor";if(d!=null){d=d.createRange();d=rng;d.select()}}rteCommand(b,c,a);showHideElement("cp"+b,"hide")}function addImage(a){imagePath=prompt("Enter Image URL:","http://");imagePath!=null&&imagePath!=""&&rteCommand(a,"InsertImage",imagePath)}function getOffsetTop(a){var b=a.offsetTop;a=a.offsetParent;for(var c=2;c>0;){b+=a.offsetTop;a=a.offsetParent;c--}return b}
function getOffsetLeft(a){var b=a.offsetLeft;a=a.offsetParent;for(var c=2;c>0;){b+=a.offsetLeft;a=a.offsetParent;c--}return b}function selectFont(a,b){var c=document.getElementById(b).selectedIndex;if(c!=0){c=document.getElementById(b).options[c].value;var d=b.replace("_"+a,"");rteCommand(a,d,c);document.getElementById(b).selectedIndex=0}}
function kb_handler(a){var b=a.target.id;if(a.ctrlKey){var c="";switch(String.fromCharCode(a.charCode).toLowerCase()){case "b":c="bold";break;case "i":c="italic";break;case "u":c="underline"}if(c){rteCommand(b,c,null);a.preventDefault();a.stopPropagation()}}}function insertHTML(a){var b=currentRTE;b=document.all?frames[b]:document.getElementById(b).contentWindow;b.focus();document.all?b.document.selection.createRange().pasteHTML(a):b.document.execCommand("insertHTML",false,a)}
function showHideElement(a,b){if(document.getElementById(a))a=document.getElementById(a);if(b=="show")a.style.visibility="visible";else if(b=="hide")a.style.visibility="hidden"}function setRange(a){if(document.all){a=frames[a];a=a.document.selection;if(a!=null)rng=a.createRange()}else{a=document.getElementById(a).contentWindow;a=a.getSelection();rng=a.getRangeAt(a.rangeCount-1).cloneRange()}}
function stripHTML(a){a=a.replace(/(<([^>]+)>)/ig,"");a=a.replace(/\r\n/g," ");a=a.replace(/\n/g," ");a=a.replace(/\r/g," ");return a=trim(a)}function trim(a){if(typeof a!="string")return a;a=a;for(var b=a.substring(0,1);b==" ";){a=a.substring(1,a.length);b=a.substring(0,1)}for(b=a.substring(a.length-1,a.length);b==" ";){a=a.substring(0,a.length-1);b=a.substring(a.length-1,a.length)}for(;a.indexOf("  ")!=-1;)a=a.substring(0,a.indexOf("  "))+a.substring(a.indexOf("  ")+1,a.length);return a}
function checkspell(){try{(new ActiveXObject("ieSpell.ieSpellExtension")).CheckAllLinkedDocuments(document)}catch(a){if(a.number==-2146827859)confirm("ieSpell not detected.  Click Ok to go to download page.")&&window.open("http://www.iespell.com/download.php","DownLoad");else alert("Error Loading ieSpell: Exception "+a.number)}}function raiseButton(){var a=window.event.srcElement;className=a.className;if(className=="rteImage"||className=="rteImageLowered")a.className="rteImageRaised"}
function normalButton(){var a=window.event.srcElement;className=a.className;if(className=="rteImageRaised"||className=="rteImageLowered")a.className="rteImage"}function lowerButton(){var a=window.event.srcElement;className=a.className;if(className=="rteImage"||className=="rteImageRaised")a.className="rteImageLowered"}
function resizeImage(){if($("#imgShow").width()>$("#page").width()||$("#imgShow").height()>$("#page").height()){$("#page").height();$("#page").width();$("#page").height();$("#page").width();$("#page").width();$("#page").height();$("#imgShow").width(Math.floor($("#page").height()*($("#imgShow").width()/$("#imgShow").height())));$("#imgShow").height($("#page").height())}}
function addRightClickMenu(){$("#thumbImage").contextMenu({menu:"printImgMenu",yTop:0,xLeft:20},function(a){if(a=="print")getBrowser().indexOf("FIREFOX")==-1?$("#thumbImage").printElement({printMode:"popup"}):$("#thumbImage").printElement()})}
var bEnableAnimation=getBrowser().indexOf("MSIE")!=-1&&getBrowserVersion()>8?false:true,thumbnailviewer={enableTitle:bEnableAnimation,enableAnimation:false,definefooter:'<div class="footerbar" style="cursor: pointer" onClick="thumbnailviewer.closeit()">'+chiudiMsg+"</div>",defineLoading:'<img src="/app_img/loading.gif" /> '+loadingMsg,scrollbarwidth:16,opacitystring:"filter:progid:DXImageTransform.Microsoft.alpha(opacity=10); -moz-opacity: 0.1; opacity: 0.1",targetlinks:[],createthumbBox:function(){document.write('<div id="thumbBox" class="ui-draggable" style="cursor: move">'+
this.definefooter+'<div id="thumbImage"></div>'+this.definefooter+"</div>");document.write('<div id="thumbLoading">'+this.defineLoading+"</div>");this.thumbBox=document.getElementById("thumbBox");this.thumbImage=document.getElementById("thumbImage");this.thumbLoading=document.getElementById("thumbLoading");this.standardbody=document.compatMode=="CSS1Compat"?document.documentElement:document.body},centerDiv:function(a){var b=document.all&&!window.opera,c=b?this.standardbody.scrollTop:window.pageYOffset,
d=b?this.standardbody.clientHeight:window.innerHeight,e=a.offsetHeight;c=d>e?c+d/2-e/2+"px":c+10+"px";a.style.left=(b?this.standardbody.clientWidth:window.innerWidth-this.scrollbarwidth)/2-a.offsetWidth/2+"px";a.style.top=Math.floor(parseInt(c))+"px";a.style.zIndex="99999";a.style.visibility="visible"},showthumbBox:function(){thumbnailviewer.thumbLoading.style.visibility="hidden";this.centerDiv(this.thumbBox);if(this.enableAnimation){this.currentopacity=0.1;this.opacitytimer=setInterval("thumbnailviewer.opacityanimation()",
20)}},loadimage:function(a){this.thumbBox.style.visibility=="visible"&&this.closeit();var b='<img id="imgShow" src="'+a.getAttribute("href")+'" style="'+this.opacitystring+'" />';if(this.enableTitle&&a.getAttribute("title"))b+="<br />"+a.getAttribute("title");this.centerDiv(this.thumbLoading);this.thumbImage.innerHTML=b;this.featureImage=this.thumbImage.getElementsByTagName("img")[0];if(this.featureImage.complete){resizeImage();thumbnailviewer.showthumbBox()}else this.featureImage.onload=function(){resizeImage();
thumbnailviewer.showthumbBox()};if(document.all&&!window.createPopup)this.featureImage.src=a.getAttribute("href");this.featureImage.onerror=function(){thumbnailviewer.thumbLoading.style.visibility="hidden"};addRightClickMenu()},setimgopacity:function(a){var b=this.featureImage;if(b.filters&&b.filters[0])if(typeof b.filters[0].opacity=="number")b.filters[0].opacity=a*100;else b.style.filter="alpha(opacity="+a*100+")";else if(typeof b.style.MozOpacity!="undefined")b.style.MozOpacity=a;else if(typeof b.style.opacity!=
"undefined")b.style.opacity=a;else this.stopanimation()},opacityanimation:function(){this.setimgopacity(this.currentopacity);this.currentopacity+=0.1;this.currentopacity>1&&this.stopanimation()},stopanimation:function(){typeof this.opacitytimer!="undefined"&&clearInterval(this.opacitytimer)},closeit:function(){this.stopanimation();this.thumbBox.style.visibility="hidden";this.thumbImage.innerHTML="";this.thumbBox.style.left="-2000px";this.thumbBox.style.top="-2000px"},cleanup:function(){this.thumbLoading=
null;if(this.featureImage)this.featureImage.onload=null;this.thumbImage=this.featureImage=null;for(var a=0;a<this.targetlinks.length;a++)this.targetlinks[a].onclick=null;this.thumbBox=null},dotask:function(a,b,c){c=window.addEventListener?c:"on"+c;if(a.addEventListener)a.addEventListener(c,b,false);else a.attachEvent&&a.attachEvent(c,b)},init:function(){if(!this.enableAnimation)this.opacitystring="";for(var a=document.getElementsByTagName("a"),b=0;b<a.length;b++)if(a[b].getAttribute("rel")&&a[b].getAttribute("rel")==
"thumbnail"){a[b].onclick=function(){thumbnailviewer.stopanimation();thumbnailviewer.loadimage(this);return false};this.targetlinks[this.targetlinks.length]=a[b]}this.dotask(window,function(){thumbnailviewer.thumbBox.style.visibility=="visible"&&thumbnailviewer.centerDiv(thumbnailviewer.thumbBox)},"resize")}};thumbnailviewer.createthumbBox();thumbnailviewer.dotask(window,function(){thumbnailviewer.init()},"load");thumbnailviewer.dotask(window,function(){thumbnailviewer.cleanup()},"unload");
var StrutsUtils={};StrutsUtils.getValidationErrors=function(a){return a.indexOf("/* {")==0?eval("( "+a.substring(2,a.length-2)+" )"):null};StrutsUtils.clearValidationErrors=function(a){if(StrutsUtils.firstElement(a).tagName.toLowerCase()=="table"){clearErrorMessagesXHTML(a);clearErrorLabelsXHTML(a)}else{clearErrorMessagesCSS(a);clearErrorLabelsCSS(a)}};
StrutsUtils.showValidationErrors=function(a,b){StrutsUtils.clearValidationErrors(a,b);var c=StrutsUtils.firstElement(a).tagName.toLowerCase()=="table";if(b.fieldErrors)for(var d in b.fieldErrors)for(var e=0;e<b.fieldErrors[d].length;e++)c?addErrorXHTML(a.elements[d],b.fieldErrors[d][e]):addErrorCSS(a.elements[d],b.fieldErrors[d][e])};
StrutsUtils.firstElement=function(a,b){for(var c=a.firstChild;c&&c.nodeType!=1;)c=c.nextSibling;if(b&&c&&c.tagName&&c.tagName.toLowerCase()!=b.toLowerCase())c=StrutsUtils.nextElement(c,b);return c};StrutsUtils.nextElement=function(a,b){if(!a)return null;do a=a.nextSibling;while(a&&a.nodeType!=1);if(a&&b&&b.toLowerCase()!=a.tagName.toLowerCase())return StrutsUtils.nextElement(a,b);return a};
StrutsUtils.previousElement=function(a,b){if(!a)return null;if(b)b=b.toLowerCase();do a=a.previousSibling;while(a&&a.nodeType!=1);if(a&&b&&b.toLowerCase()!=a.tagName.toLowerCase())return StrutsUtils.previousElement(a,b);return a};StrutsUtils.addOnLoad=function(a){var b=window.onload;window.onload=typeof window.onload!="function"?a:function(){b();a()}};StrutsUtils.addEventListener=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&a.attachEvent("on"+b,c)};
function dumpProps(a,b){for(var c in a){if(!confirm(b?b+"."+c+"\n"+a[c]:c+"\n"+a[c]))break;if(typeof a[c]=="object")b?dumpProps(a[c],b+"."+c):dumpProps(a[c],c)}};
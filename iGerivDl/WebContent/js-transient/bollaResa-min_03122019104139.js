setDataTipoBolla(msgDataTipoBolla,"dataTipoBolla");
if(conditionItensBolla){$(document).ready(function(){var a=$("#messageDiv");if(conditionDisableForm)disableBollaResa();else{a.css({border:"none"});a.text("")}$("#totalHeader_1").text($("#BollaResaTab_table tr.calcRow td:nth-child(7)").text().trim());$("#totalHeader_2").text($("#BollaResaTab_table tr.calcRow td:nth-child(12)").text().trim());$("#totalHeader_3").text($("#BollaResaTab_table tr.calcRow td:nth-child(13)").text().trim());addFadeLayerEvents();setLastFocusedElement();setOnChangeEventOnTextFields();
setBorderToFuoriVoce();setNoteOnTitle();setTooltipOnRichiamoResa();setStatisticheOnNumero();setContentDivHeight(20);if($("#autoincrement").length>0){if($("#autoincrement").attr("checked")==true){$("#qtaReso").val(1);$("#quantita").show();$("#lastRowId").show()}else{$("#quantita").hide();$("#lastRowId").hide()}$("#autoincrement").change(function(){if($(this).attr("checked")==true){$("#quantita").show();$("#lastRowId").show();$("#qtaReso").val(1)}else{$("#quantita").hide();$("#lastRowId").hide()}$("#barcode").focus()})}$(this).bind("keydown",
bollaResaKeyDown);$.altPlus(function(){var c=isNaN($("#qtaReso").val())?0:Number($("#qtaReso").val());$("#qtaReso").val(++c)},null);$.altMinus(function(){var c=isNaN($("#qtaReso").val())?0:Number($("#qtaReso").val());$("#qtaReso").val(--c)},null);if($("#barcode").length>0){$("#barcode").keydown(manageBarcodeKeyDown);$("#barcode").focus()}$("#BollaResaForm input:text[name^=reso]").change(function(){setChangedFieldAttribute($(this))})});var disableBollaResa=function(){disableAllFormFields("dataTipoBolla",
"submitFilter","barcode","popup_ok");conditionDlReadOnly&&$("input:button[name='plg.inserisci.nuovo.fuori.voce'], input:button[name='igeriv.memorizza'], input:button[name='igeriv.memorizza.invia']").hide();var a=document.createElement("div");a.style.position="absolute";a.style.top="0px";a.style.color="red";a.style.width="180px";a.style.borderStyle="solid";a.style.border="1px solid red";a.style.textAlign="center";a.innerHTML="<b>"+msgBollaGiaInviata;var c=$("#messageDiv");c.css({width:"180px",left:"0px"});
if(c.find("div")[0]){y=c.find("div")[0];c.replace(a,y)}else c.append(a)},bollaResaKeyDown=function(a){var c=a.keyCode?a.keyCode:a.charCode;if(!a.shiftKey&&c=="9"||c=="40")setTimeout(function(){var b=lastFocusedFieldId.replace(/([|])/g,"\\$1");b=$("#"+b);b.val()!=b.data("oldVal")&&b.trigger("blur");b.css("background","#fff");b=b.closest("tr").next().find("input:text[name^='reso']").first();$("#popup_container").is(":visible")||b.focus()},100);else if(a.shiftKey&&c=="9"||c=="38")setTimeout(function(){var b=
lastFocusedFieldId.replace(/([|])/g,"\\$1");b=$("#"+b);b.val()!=b.data("oldVal")&&b.trigger("blur");b.css("background","#fff");b=b.closest("tr").prev().find("input:text[name^='reso']").first();$("#popup_container").is(":visible")||b.focus()},100);else if(c==37){a.preventDefault();$("#qtaReso").focus();$("#barcode").css("background","#fff")}else if(c==39){a.preventDefault();$("#barcode").focus();$("#qtaReso").css("background","#fff")}};window.onbeforeunload=function(){if(attivaMemorizzazioneAutomatica&&
$("#BollaResaForm input:hidden[name^=modificato][value=true]").length>0){validateFields("BollaResaForm")&&setFieldsToSave(true)&&setFormAction("BollaResaForm","bollaResa_save.action","","messageDiv",true,"",function(){setFieldsToSave(false);deleteEmptyRowsFuoriVoce()},"",false);return msgConfirmSaveBolla}};var tableRowClick=function(){lastFieldFocusId=$(this).parent().find("input:text[name^=reso]").first().attr("id");var a=$(this).parent().attr("divParam").split("?")[1].split("&")[0].split("=")[1];
a=appContext+"/bollaResa_showBollaResaFuoriVoce.action?cpu="+a+"&dataTipoBolla="+escape($("#dataTipoBolla").val());openDiv("popup_name",900,300,a);return false};if(conditionDisableFormAndNotReadonly){var $colTitolo=$("#BollaResaTab_table tbody").find("td:nth-child(3)");$colTitolo.css("cursor","pointer");$colTitolo.click(tableRowClick);$colTitolo.tooltip({delay:0,showURL:false,bodyHandler:function(){return"<b>"+msgInserisciModificaResaFuoriVoce+"</b>"}})}var noBarcodeFoundAction=function(a,c,b){c=
"?barcode="+a+"&dataTipoBolla="+escape($("#dataTipoBolla").val())+(typeof c==="undefined"||c==null?"":"&confirmResult="+c)+(typeof b==="undefined"||b==null?"":"&confirmResultCD="+b);dojo.xhrGet({url:appContext+"/pubblicazioniRpc_getPubblicazioneByBarcode.action"+c,handleAs:"json",headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(d){if(d!=null&&typeof d!="undefined"&&d.length>0){var g=false,f=d[0];if(f.err&&f.err.length>0){$.alerts.dialogClass="style_1";jAlert(f.err,
attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;$("#barcode").val("");$("#barcode").focus()});return false}else if(f.confirm&&f.confirm.length>0){PlaySound("beep3");jConfirm(f.confirm,attenzioneMsg,function(e){if(e)noBarcodeFoundAction(a,e);else{$("#barcode").val("");$("#barcode").focus()}return false},true,true);return false}else if(f.confirmCD&&f.confirmCD.length>0){PlaySound("beep3");jConfirm(f.confirmCD,attenzioneMsg,function(e){if(e)noBarcodeFoundAction(a,null,e);else{$("#barcode").val("");
$("#barcode").focus()}return false},true,true);return false}else $("#BollaResaTab_table tbody tr td:nth-child(2)").each(function(){var e=$(this),i=$("#"+f.pk.replace(/([|@])/g,"\\$1"));if(i.length>0)return false;else if(Number(e.text().trim())==Number(f.cpu)){g=true;e=e.closest("tr");i=getRowHtmlResa(f,0);$(i).insertAfter(e);$("#content1").css({height:$("#BollaResaForm").height()+30+"px"});e="<input type='hidden' id='reso_old_"+f.pk+"' value='1'/>";i="<input type='hidden' id='giacenza_old_"+f.pk+
"' value='"+f.giacenza+"'/>";$("#extraHidden").append(e+i);e=f.pk.replace(/([|@])/g,"\\$1");i=$("#"+e);i.keydown(focusBarcodeField);setTotalValues(i);setOnChangeEventOnTextFields();setBorderToFuoriVoce();setFocusedFieldStyle();e=$("#BollaResaTab_table tbody").find("td:nth-child(3)");e.unbind("click",tableRowClick);e.css("cursor","pointer").click(tableRowClick);return false}});if(!g){d=f.pk.replace("resoFuoriVoce","reso").replace(/([|@])/g,"\\$1");d=$("#"+d);if(d.length<=0){d=getRowHtmlResa(f,0);$(d).insertBefore($("#BollaResaTab_table tbody tr:last"));
$("#content1").css({height:$("#BollaResaForm").height()+30+"px"});d="<input type='hidden' id='reso_old_"+f.pk+"' value='1'/>";var h="<input type='hidden' id='giacenza_old_"+f.pk+"' value='"+f.giacenza+"'/>";$("#extraHidden").append(d+h);d=f.pk.replace(/([|@])/g,"\\$1");d=$("#"+d);d.keydown(focusBarcodeField);setTotalValues(d);setOnChangeEventOnTextFields();setBorderToFuoriVoce();setFocusedFieldStyle();d=$("#BollaResaTab_table tbody").find("td:nth-child(3)");d.unbind("click",tableRowClick);d.css("cursor",
"pointer").click(tableRowClick)}}selectRowByBarcode(f.pk,"",$("#autoincrement").is(":checked"))}else{setTimeout(function(){$.alerts.dialogClass="style_1";jAlert(nessunaPubblicazione,attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null})},100);$("#barcode").val("")}return false}});return false},getRowHtmlResa=function(a,c){var b=isNaN(parseLocalNum(a.prezzoLordo))?"":Number(parseLocalNum(a.prezzoLordo)).toFixed(2),d=isNaN(parseLocalNum(a.prezzoNetto))?"":Number(parseLocalNum(a.prezzoNetto)).toFixed(4),
g=Number(b).toFixed(2),f=Number(d).toFixed(4),h=a.pk.replace("resoFuoriVoce",""),e="<tr class='odd' style='height: 30px;' onmouseover='this.className=\"highlight\"' onmouseout='this.className=\"odd\"' divparam='#?cpu="+a.cpu+"' iv='' pv=''>";e+="<td width='2%'>&nbsp;</td>";e+="<td style='text-align: center;' width='4%'>"+a.cpu+"</td>";e+="<td style='cursor: pointer;' width='16%'>"+a.titolo+"</td>";e+="<td width='12%'>"+a.sottotitolo+"</td>";e+="<td style='text-align: center;' width='4%'>"+a.numeroCopertina+
"</td>";e+="<td style='text-align: center;' width='5%'>"+a.distribuito+"</td>";e+="<td class='extremeTableFieldsSmaller' style='font-size: 120%; font-weight: bold; text-align: right; border-width: 1px medium; border-style: solid none; border-color: red -moz-use-text-color;' width='5%'><input name='resoFuoriVoce[&#39;"+h+"&#39;]' id='"+a.pk+"' value='"+(typeof c==="undefined"?1:c)+"' class='extremeTableFieldsSmaller' style='font-size:120%; font-weight:bold; text-align: right; border-color: rgb(153, 153, 153);' size='2' maxlength='3' validateisnumeric='true' isnewfield='true' type='text'><input type='hidden' name='modificatoFV[&#39;"+
h+"&#39;]' id='modificatoFV"+h+"' value='false'/></td>";e+="<td style='text-align: center;' width='5%'>"+a.giacenza+"</td>";e+="<td style='text-align: center;' class='extremeTableFieldsSmaller' style='text-align: right;' width='8%'>"+a.dataUscita+"</td>";e+="<td style='text-align: right;' width='6%'>"+displayNum(b)+"</td>";e+="<td style='text-align: right;' width='6%'>"+displayNum(d)+"</td>";e+="<td style='text-align: right;' width='7%'>"+displayNum(g)+"</td>";e+="<td style='text-align: right;' width='7%'>"+
displayNum(f)+"</td>";e+="<td style='text-align: center;' width='8%'></td>";e+="<td style='text-align: center;' width='3%'><a href=\"/immagini/"+a.img+'" rel="thumbnail"><img src="/app_img/camera.gif" width="15px" height="15px" border="0" style="border-style:none"/></a></td>';e+="</tr>";return e},onCloseLayer=function(){};$("input:button[name='plg.inserisci.nuovo.fuori.voce']").click(function(){var a=appContext+"/pubblicazioni_showFilter.action?dataTipoBolla="+escape($("#dataTipoBolla").val());openDiv("popup_name",
900,500,a)});var setTotalValues=function(a){try{var c=$(a),b=c.attr("id").replace("reso","").replace("resoRichiamo","").replace("resoFuoriVoce","").replace(/([|@])/g,"\\$1"),d=parseLocalNum($("#reso_old_"+b).val()),g=c.parent().prev().prev(),f=g.prev().prev().text(),h=g.text(),e=g.find("a:first").attr("href").split("?")[1].split("&")[0].split("=")[1];$("#contoDeposito_"+e).length>0&&(d==""||d==0)?jConfirm(confirmResaContoDeposito1.replace("{0}",f).replace("{1}",h),attenzioneMsg.toUpperCase(),function(j){if(j)setTotalValues1(a);
else{setTimeout(function(){a.focus()},50);fieldIsValidToIncrement=false;j=a.data("oldVal");a.val(j);return false}},true,true):setTotalValues1(a)}catch(i){setTotalValues1(a)}},setTotalValues1=function(a){getDelta(a)<0?jConfirm(msgResoSuperioreGiacenza,attenzioneMsg.toUpperCase(),function(c){if(c)setTotals(a);else{setTimeout(function(){a.focus()},50);fieldIsValidToIncrement=false;c=a.data("oldVal");a.val(c);return false}}):setTotals(a)},setOnChangeEventOnTextFields=function(){var a=$("#BollaResaForm input:text[name^='reso']");
a.numeric(false,null,function(){setTotalValues($(this));return true});a.bind("keydown",function(c){if((c.keyCode?c.keyCode:c.charCode)==13){c.preventDefault();setTotalValues($(this))}});a.each(function(){var c=$(this),b=c.val().trim();c.data("oldVal",b)});return false},setBorderToFuoriVoce=function(){$("#BollaResaForm input:text[name^='resoFuoriVoce']").closest("tr").each(function(){var a=$(this);a.contents("td").css({"border-top":"1px solid red","border-bottom":"1px solid red","border-left":"none",
"border-right":"none"});a.contents("td:first").css("border-left","1px solid red");a.contents("td:last").css("border-right","1px solid red")});return false},setTooltipOnRichiamoResa=function(){$("#BollaResaTab_table tbody tr:not(:last) td:nth-child(14)").each(function(){var a=$(this);if(a.text().length>0){var c=a.parent("tr").attr("pk").replace(/([|@])/g,"\\$1");c=$("#tipoRichiamoExt_"+c).val();a.attr("title",c);a.tooltip()}});return false},setStatisticheOnNumero=function(){$("#BollaResaTab_table tbody tr td:nth-child(5)").each(function(){var a=
$(this);a.click(function(){var c=a.find("a");if(c.length>0&&c.attr("href").length>0){var b=a.closest("tr").find("td:nth-child(2)").first().text();openStatistica(c.attr("href"),b)}});a.tooltip({delay:0,showURL:false,bodyHandler:function(){return"<b>"+msgVisualizzaStatistiche+"</b>"}})});return false},openStatistica=function(a,c){var b=a.split("?")[1].split("&"),d=b[0].split("=")[1];b=b[1].split("=")[1];openDiv("popup_name",900,380,appContext+"/statisticaPubblicazioni_showNumeriPubblicazioniStatistica.action?codPubblicazione="+
c+"&idtn="+d+"&periodicita="+b);return false},setNoteOnTitle=function(){$("#BollaResaTab_table tbody tr:not(:last) td:nth-child(1)").each(function(){var a=$(this).parent("tr"),c=a.attr("pk").replace(/([|@])/g,"\\$1");if(c&&c.length>0){var b=$("#noteRivendita"+c).val(),d=$("#noteRivenditaCpu"+c).val(),g=b.length>0?b:d;if(g.length>0){var f=a.find("td:nth-child(3)").text().trim(),h=a.find("td:nth-child(5)").text().trim();$(this).css({cursor:"pointer","background-image":"url('/app_img/corner.gif')",border:"0px",
"border-style":"none","background-repeat":"no-repeat"});$(this).click(function(){jAlert(g,msgNoteRivenditaPerPubblicazioneNumero.replace("{0}",f).replace("{1}",h),function(){lastFocusedFieldId=null;selectRowByBarcode(c,"reso");return false})});var e=getNoteRivendita(b,d);$(this).tooltip({delay:0,showURL:false,bodyHandler:function(){return"<b>"+e+"</b>"}})}}});return false},reloadDataTipoBolleResa=function(){dojo.xhrGet({url:appContext+"/pubblicazioniRpc_getDateTipoBollaResa.action",handleAs:"json",
headers:{"Content-Type":"application/json; charset=uft-8"},preventCache:true,handle:function(a){a=JSON.parse(a);for(var c="",b=0;b<a.length;b++){var d="",g=a[b].dataBollaFormat+"|"+a[b].tipoBolla+"|"+a[b].readonly+"|"+a[b].gruppoSconto;if(dataTipoBolla==g){d="selected";a[b].readonly==true&&disableBollaResa()}c+=Number(a[b].bollaTrasmessaDl)>=2?"<option "+d+' style="color:red" value="'+g+'">'+a[b].dataBollaFormat+"&nbsp;&nbsp;"+a[b].tipoBolla+"&nbsp;("+msgBollaTrasmessa+")</option>":Number(a[b].bollaTrasmessaDl)==
1?"<option "+d+' style="color:blue" value="'+g+'">'+a[b].dataBollaFormat+"&nbsp;&nbsp;"+a[b].tipoBolla+"&nbsp;("+msgBollaInTrasmissione+")</option>":Number(a[b].bollaTrasmessaDl)==0?"<option "+d+' value="'+g+'">'+a[b].dataBollaFormat+"&nbsp;&nbsp;"+a[b].tipoBolla+"&nbsp;("+msgBollaNonTrasmessa+")</option>":"<option "+d+' value="'+g+'">'+a[b].dataBollaFormat+"&nbsp;&nbsp;"+a[b].tipoBolla+"</option>"}$("#dataTipoBolla").empty();$("#dataTipoBolla").html(c)}})},showConfirmDialogs=function(){if((showAlertNonPermettiResaInContoDeposito||
showDialogResoSuperioreGiacenza||showDialogConfirmNumeroResaRespinto||showDialogConfirmResaInContoDeposito)&&objToFocus!=null){if(showAlertNonPermettiResaInContoDeposito)jAlert(msgResaContoDepositoNonPermessa.replace("{0}",$tit).replace("{1}",$num).replace("{2}",$ncd.val()),attenzioneMsg.toUpperCase(),function(){$.alerts.dialogClass=null;unBlockUI();showDialogConfirmResaInContoDeposito=showDialogConfirmNumeroResaRespinto=showDialogResoSuperioreGiacenza=showAlertNonPermettiResaInContoDeposito=false;
objToFocus=null;setTimeout(function(){$("#titolo").focus()},100)});else if(showDialogResoSuperioreGiacenza){PlaySound("beep3");jConfirm(msgResoSuperioreGiacenza,attenzioneMsg.toUpperCase(),function(a){if(a){setChangedFieldAttribute(objToFocus);objToFocus.data("oldVal",objToFocus.val());bypassValidateGiacenza=true;setTimeout(function(){return setFormAction("BollaResaFuoriVoceForm","bollaResa_saveBollaResaFuoriVoce.action","","messageDivFuoriVoce",false,"",function(){afterSaveResaFuoriVoce()},function(){return validateFields("BollaResaFuoriVoceForm")&&
customValidateFields()&&validatePubblicazioneRespinta()&&validatePubblicazioneContoDeposito()&&showConfirmDialogs()},false)},100)}else{a=objToFocus.data("oldVal");objToFocus.val(a);unBlockUI()}showDialogConfirmNumeroResaRespinto=showDialogResoSuperioreGiacenza=false;objToFocus=null})}else if(showDialogConfirmNumeroResaRespinto){PlaySound("beep3");jConfirm(msgConfirmNumeroResaRespinto.replace("{0}",$tit).replace("{1}",$num).replace("{2}",$ncd.val()),attenzioneMsg.toUpperCase(),function(a){if(a){unBlockUI();
setTimeout(function(){objToFocus.focus()},200);bypassValidatePubblicazioneRespinta=true;setTimeout(function(){return setFormAction("BollaResaFuoriVoceForm","bollaResa_saveBollaResaFuoriVoce.action","","messageDivFuoriVoce",false,"",function(){afterSaveResaFuoriVoce()},function(){return validateFields("BollaResaFuoriVoceForm")&&customValidateFields()&&validatePubblicazioneRespinta()&&validatePubblicazioneContoDeposito()&&showConfirmDialogs()},false)},100)}else $("#forzaNonRespingere").val(1);showDialogConfirmNumeroResaRespinto=
showDialogResoSuperioreGiacenza=false;objToFocus=null})}else if(showDialogConfirmResaInContoDeposito){PlaySound("beep3");jConfirm(confirmResaContoDeposito1.replace("{0}",$tit).replace("{1}",$num),attenzioneMsg.toUpperCase(),function(a){if(a){unBlockUI();setTimeout(function(){objToFocus.focus()},200);bypassValidatePubblicazioneContoDeposito=true;setTimeout(function(){return setFormAction("BollaResaFuoriVoceForm","bollaResa_saveBollaResaFuoriVoce.action","","messageDivFuoriVoce",false,"",function(){afterSaveResaFuoriVoce()},
function(){return validateFields("BollaResaFuoriVoceForm")&&customValidateFields()&&validatePubblicazioneRespinta()&&validatePubblicazioneContoDeposito()&&showConfirmDialogs()},false)},100)}else{unBlockUI();setTimeout(function(){$("#titolo").focus()},100)}showDialogConfirmNumeroResaRespinto=showDialogResoSuperioreGiacenza=false;objToFocus=null},true,true)}return false}return true},customValidateFields=function(){if(bypassValidateGiacenza)bypassValidateGiacenza=false;else $("#BollaResaFuoriVoceForm input:text[name^='resoFuoriVoce']").each(function(){$(this).val().trim()!=
""&&validateGiacenza($(this))});return true},validatePubblicazioneRespinta=function(){if(bypassValidatePubblicazioneRespinta){bypassValidatePubblicazioneRespinta=false;return true}$("#tipoControlloPubblicazioniRespinte").val()==2&&$("#BollaResaFuoriVoceForm input:hidden[id^='motivoResaRespinta_']").each(function(){$ncd=$(this);var a=$ncd.attr("id").replace("motivoResaRespinta_","").trim(),c=$("#resoFuoriVoce"+a.replace(/([|@])/g,"\\$1")),b=c.val();if(!$ncd.val().trim().startsWith("2|")&&b!=""&&b>
0){$tit=$("#titolo_"+a.replace(/([|@])/g,"\\$1")).val();$num=$("#numero_"+a.replace(/([|@])/g,"\\$1")).val();showDialogConfirmNumeroResaRespinto=true;objToFocus=c;return true}});return true},validatePubblicazioneContoDeposito=function(){if(bypassValidatePubblicazioneContoDeposito){bypassValidatePubblicazioneContoDeposito=false;return true}$("#BollaResaFuoriVoceForm input:hidden[id^='numeroInContoDeposito_']").each(function(){$ncd=$(this);var a=$ncd.attr("id").replace("numeroInContoDeposito_","").trim(),
c=$("#resoFuoriVoce"+a.replace(/([|@])/g,"\\$1"));c.val();var b=$ncd.val().trim().split("|"),d=b[0];b=b[1];if(d.toString()=="true"&&b.toString()!="false"){$tit=$("#titolo_"+a.replace(/([|@])/g,"\\$1")).val();$num=$("#numero_"+a.replace(/([|@])/g,"\\$1")).val();showDialogConfirmResaInContoDeposito=true;objToFocus=c;return true}else if(d.toString()=="true"&&b.toString()=="false"){showDialogConfirmResaInContoDeposito=false;return showAlertNonPermettiResaInContoDeposito=true}});return true},deleteEmptyRowsFuoriVoce=
function(){$("#BollaResaForm input:text[name^='resoFuoriVoce']").each(function(){if($(this).val().trim()==""||$(this).val().trim()=="0")$(this).closest("tr").remove()});return false},getDelta=function(a){var c=$(a);a=parseLocalNum(c.val());var b=c.attr("id").replace("reso","").replace("resoRichiamo","").replace("resoFuoriVoce","").replace(/([|@])/g,"\\$1");c=parseLocalNum($("#reso_old_"+b).val());c=isNaN(c)?0:c;b=parseLocalNum($("#giacenza_old_"+b).val());b=isNaN(b)?0:b;return Number(b)+(c-Number(a))},
setTotals=function(a,c){var b=$(a),d=parseLocalNum(b.val());b.attr("name");var g=b.attr("id").replace("reso","").replace("resoRichiamo","").replace("resoFuoriVoce","").replace(/([|@])/g,"\\$1"),f=parseLocalNum($("#reso_old_"+g).val());f=isNaN(f)?0:f;var h=parseLocalNum($("#giacenza_old_"+g).val()),e=isNaN(h)?0:h,i=b.parent().next(),j=i.next().next(),k=j.next(),l=k.next(),n=l.next();h=parseLocalNum(l.text());var m=parseLocalNum(n.text());if(isNaN(d))return false;if(b.attr("isnewfield")&&b.attr("isnewfield")==
"true"){m=h=f=0;b.attr("isnewfield","false")}e=Number(e)+(f-Number(d));if(typeof c==="undefined"||c==false)setChangedFieldAttribute(b);b.data("oldVal",d);b=parseLocalNum(j.text());k=parseLocalNum(k.text());b=(Number(d)*Number(b)).toFixed(2);k=(Number(d)*Number(k)).toFixed(4);j=displayNum(e.toString());$("#giacenza_old_"+g).val(j);$("#reso_old_"+g).val(displayNum(d.toString()));i.text(isNaN(e)?"":j);l.text(isNaN(b)?"":displayNum(b.toString()));n.text(isNaN(k)?"":displayNum(k.toString()));l=Number(parseLocalNum($("#BollaResaTab_table tr.calcRow td:nth-child(7)").text()));
i=Number(parseLocalNum($("#BollaResaTab_table tr.calcRow td:nth-child(12)").text()));g=Number(parseLocalNum($("#BollaResaTab_table tr.calcRow td:nth-child(13)").text()));l=(isNaN(l)||isNaN(f)?"":Number(l)+Number(d-f)).toFixed(0);i=(isNaN(i)||isNaN(h)?"":Number(i)+(Number(b)-Number(h))).toFixed(2);g=(isNaN(g)||isNaN(m)?"":Number(g)+(Number(k)-Number(m))).toFixed(4);d=displayNum(l.toString());f=displayNum(i.toString());h=displayNum(g.toString());$("#BollaResaTab_table tr.calcRow td:nth-child(7)").text(d);
$("#BollaResaTab_table tr.calcRow td:nth-child(12)").text(f);$("#BollaResaTab_table tr.calcRow td:nth-child(13)").text(h);$("#totalHeader_1").text(d);$("#totalHeader_2").text(f);$("#totalHeader_3").text(h)},validateGiacenza=function(a){var c=parseLocalNum($(a).val()),b=$(a).attr("id").replace("reso","").replace("resoRichiamo","").replace("resoFuoriVoce","").replace(/([|@])/g,"\\$1");if($("#reso_old_"+b)){var d=isNaN(parseLocalNum($("#reso_old_"+b).val()))?0:typeof $("#reso_old_"+b).val()==="undefined"||
$("#reso_old_"+b).val()==""?0:parseLocalNum($("#reso_old_"+b).val());b=isNaN(parseLocalNum($("#giacenza_old_"+b).val()))?0:parseLocalNum($("#giacenza_old_"+b).val());if($(a).attr("isnewfield")&&$(a).attr("isnewfield")=="true"){d=0;$(a).attr("isnewfield","false")}if(Number(b)+(Number(d)-Number(c))<0){showDialogResoSuperioreGiacenza=true;objToFocus=$(a);return true}}return true},setFieldsToSave=function(a){$("#BollaResaForm input:text[name^=reso]").each(function(){var c=$(this);if(a)c.data("oldValSubmit",
c.val());else{var b=c.next("input:hidden[name^=modificato]");c.data("oldValSubmit")!=c.val()?b.val("true"):b.val("false")}});return true},nessunaPubblicazioneAction=function(){$("#barcode").val("")},doAfterAutoIncremetActions=function(a){var c=a.parent().parent(),b=c.find("td:nth-child(3)").text(),d=c.find("td:nth-child(5)").text();c=c.find("td:nth-child(8)").text();$("#titoloDiv").text(b);$("#numeroDiv").text(d);$("#copieDiv").text(a.val());$("#giacDiv").text(c);!isNaN(c)&&Number(c)>0?$("#giacDiv").css({color:"red"}):
$("#giacDiv").css({color:"black"})}};